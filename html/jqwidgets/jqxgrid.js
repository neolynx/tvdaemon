/*
jQWidgets v2.5.0 (2012-Oct-17)
Copyright (c) 2011-2012 jQWidgets.
License: http://jqwidgets.com/license/
*/

(function(b){b.jqx.jqxWidget("jqxGrid","",{});b.extend(b.jqx._jqxGrid.prototype,{defineInstance:function(){this.disabled=false;this.width=600;this.height=400;this.pagerheight=28;this.groupsheaderheight=34;this.pagesize=10;this.pagesizeoptions=["5","10","20"];this.rowsheight=25;this.columnsheight=25;this.filterrowheight=30;this.groupindentwidth=30;this.rowdetails=false;this.enablerowdetailsindent=true;this.enablemousewheel=true;this.initrowdetails=null;this.editable=false;this.editmode="selectedcell";this.pageable=false;this.groupable=false;this.sortable=false;this.filterable=false;this.autoshowfiltericon=true;this.showfiltercolumnbackground=true;this.showpinnedcolumnbackground=true;this.showsortcolumnbackground=true;this.altrows=false;this.altstart=1;this.altstep=1;this.showrowdetailscolumn=true;this.showtoolbar=false;this.toolbarheight=34;this.showstatusbar=false;this.statusbarheight=34;this.enableellipsis=true;this.groups=[];this.groupsrenderer=null;this.groupcolumnrenderer=null;this.groupsexpandedbydefault=false;this.pagerrenderer=null;this.touchmode="auto";this.columns=[];this.selectedrowindex=-1;this.selectedrowindexes=new Array();this.selectedcells=new Array();this.selectedcell=null;this.tableZIndex=799;this.headerZIndex=499;this.updatefilterconditions=null;this.showaggregates=false;this.showfilterrow=false;this.autorowheight=false;this.autokoupdates=true;this.handlekeyboardnavigation=null;this.showsortmenuitems=true;this.showfiltermenuitems=true;this.showgroupmenuitems=true;this.enablebrowserselection=false;this.source={beforeprocessing:null,beforesend:null,loaderror:null,localdata:null,data:null,datatype:"array",datafields:[],url:"",root:"",record:"",id:"",totalrecords:0,recordstartindex:0,recordendindex:0,loadallrecords:true,sortcolumn:null,sortdirection:null,sort:null,filter:null,sortcomparer:null};this.dataview=null;this.updatedelay=0;this.autoheight=false;this.showheader=true;this.showgroupsheader=true;this.closeablegroups=true;this.scrollbarsize=15;this.virtualmode=false;this.sort=null;this.columnsmenu=true;this.columnsresize=false;this.columnsreorder=false;this.columnsmenuwidth=15;this.autoshowcolumnsmenubutton=true;this.popupwidth="auto";this.sorttogglestates=2;this.rendergridrows=null;this.enableanimations=true;this.enabletooltips=false;this.selectionmode="singlerow";this.enablehover=true;this.loadingerrormessage="The data is still loading. When the data binding is completed, the Grid raises the 'bindingcomplete' event. Call this function in the 'bindingcomplete' event handler.";this.verticalscrollbarstep=5;this.verticalscrollbarlargestep=400;this.horizontalscrollbarstep=5;this.horizontalscrollbarlargestep=50;this.keyboardnavigation=true;this.touchModeStyle="auto";this.autoshowloadelement=true;this.showemptyrow=true;this.autosavestate=false;this.autoloadstate=false;this._updating=false;this._pagescache=new Array();this._pageviews=new Array();this._cellscache=new Array();this._rowdetailscache=new Array();this._rowdetailselementscache=new Array();this._requiresupdate=false;this._hasOpenedMenu=false;this.events=["initialized","rowclick","rowselect","rowunselect","groupexpand","groupcollapse","sort","columnclick","cellclick","pagechanged","pagesizechanged","bindingcomplete","groupschanged","filter","columnresized","cellselect","cellunselect","cellbeginedit","cellendedit","cellvaluechanged","rowexpand","rowcollapse","rowdoubleclick","celldoubleclick"]},createInstance:function(d){var i=b("<div tabIndex=0 style='overflow: hidden; -webkit-appearance: none; outline: none; width:100%; height: 100%; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div id='wrapper"+this.element.id+"' tabIndex=1 style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; align:left; left: 0px; top: 0px; valign:top; position: relative;'><div id='toolbar' style='visibility: hidden; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='groupsheader' style='visibility: hidden; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='content"+this.element.id+"' tabIndex=2 style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; border: none; padding: 0px; margin-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='verticalScrollBar"+this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='horizontalScrollBar"+this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; border: none; position: absolute;'/><div id='statusbar' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='pager' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/></div></div>");this._fieldsmapping();this.element.innerText="";this.element.innerHTML="";this.host.append(i);this.host.addClass(this.toTP("jqx-grid"));this.host.addClass(this.toTP("jqx-reset"));this.host.addClass(this.toTP("jqx-rc-all"));this.host.addClass(this.toTP("jqx-widget"));this.host.addClass(this.toTP("jqx-widget-content"));this.wrapper=this.host.find("#wrapper"+this.element.id);this.content=this.host.find("#content"+this.element.id);this.content.addClass(this.toTP("jqx-reset"));var h=this.host.find("#verticalScrollBar"+this.element.id);var g=this.host.find("#horizontalScrollBar"+this.element.id);this.bottomRight=this.host.find("#bottomRight").addClass(this.toTP("jqx-grid-bottomright"));if(!h.jqxScrollBar){alert("jqxscrollbar is not loaded.");return}this.editors=new Array();this.vScrollBar=h.jqxScrollBar({vertical:true,touchMode:this.touchmode,step:this.verticalscrollbarstep,largestep:this.verticalscrollbarlargestep,theme:this.theme,_triggervaluechanged:false});this.hScrollBar=g.jqxScrollBar({vertical:false,touchMode:this.touchmode,step:this.horizontalscrollbarstep,largestep:this.horizontalscrollbarlargestep,theme:this.theme,triggervaluechanged:false});this.pager=this.host.find("#pager");this.toolbar=this.host.find("#toolbar");this.toolbar[0].id="toolbar"+this.element.id;this.toolbar.addClass(this.toTP("jqx-grid-toolbar"));this.toolbar.addClass(this.toTP("jqx-widget-header"));this.statusbar=this.host.find("#statusbar");this.statusbar[0].id="statusbar"+this.element.id;this.statusbar.addClass(this.toTP("jqx-grid-statusbar"));this.statusbar.addClass(this.toTP("jqx-widget-header"));this.pager.addClass(this.toTP("jqx-grid-pager"));this.pager.addClass(this.toTP("jqx-widget-header"));this.groupsheader=this.host.find("#groupsheader");this.groupsheader.addClass(this.toTP("jqx-grid-groups-header"));this.groupsheader.addClass(this.toTP("jqx-widget-header"));this.vScrollBar.css("visibility","hidden");this.hScrollBar.css("visibility","hidden");this.vScrollInstance=b.data(this.vScrollBar[0],"jqxScrollBar").instance;this.hScrollInstance=b.data(this.hScrollBar[0],"jqxScrollBar").instance;this.gridtable=null;this.dataloadelement=b('<div style="position: absolute;"></div>');this.dataloadelement.addClass(this.toTP("jqx-grid-load"));this.dataloadelement.width(this.width);this.dataloadelement.height(this.height);this.host.prepend(this.dataloadelement);this.isNestedGrid=this.host.parent()?this.host.parent().css("z-index")==2000:false;if(this.localizestrings){this.localizestrings()}if(this.rowdetailstemplate){if(undefined==this.rowdetailstemplate.rowdetails){this.rowdetailstemplate.rowdetails="<div></div>"}if(undefined==this.rowdetailstemplate.rowdetailsheight){this.rowdetailstemplate.rowdetailsheight=200}if(undefined==this.rowdetailstemplate.rowdetailshidden){this.rowdetailstemplate.rowdetailshidden=true}}if(this._testmodules()){return}this.databind(this.source);if(this.showtoolbar){this.toolbar.css("visibility","visible")}if(this.showstatusbar){this.statusbar.css("visibility","visible")}if(this.pageable&&this._initpager){this._initpager()}this._arrange();this.tableheight=null;var f=this;var e=function(){if(f.content){f.content[0].scrollTop=0;f.content[0].scrollLeft=0}if(f.gridcontent){f.gridcontent[0].scrollLeft=0;f.gridcontent[0].scrollTop=0}};this.content.bind("mousedown",function(){e()});this.content.bind("scroll",function(j){e();return false});if(!this.showfilterrow){if(!this.showstatusbar&&!this.showtoolbar){this.host.addClass("jqx-disableselect")}this.content.addClass("jqx-disableselect")}if(this.enablebrowserselection){this.content.removeClass("jqx-disableselect");this.host.removeClass("jqx-disableselect")}this.addHandler(this.host,"loadContent",function(j){if(f.gridmenu&&f.gridmenu.width()<120){f._initmenu();f.prerenderrequired=true;f._rendercolumnheaders()}return false});if((this.width!=null&&this.width.toString().indexOf("%")!=-1)||(this.height!=null&&this.height.toString().indexOf("%")!=-1)){this._updatesizeonwindowresize=true;b(window).bind("resize."+this.element.id,function(){var k=f.host.width();var j=f.host.height();if(f.autoheight){f._lastHeight=j}if(f._lastWidth!=k||f._lastHeight!=j){f._updatesize(f._lastWidth!=k,f._lastHeight!=j)}f._lastWidth=k;f._lastHeight=j})}if(this.renderstatusbar){this.renderstatusbar(this.statusbar)}if(this.rendertoolbar){this.rendertoolbar(this.toolbar)}if(this.disabled){this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"))}this.hasTransform=b.jqx.utilities.hasTransform(this.host)},_testmodules:function(){var k="";var h=this;var d=function(){if(k.length!=""){k+=","}};if(this.columnsmenu&&!this.host.jqxMenu&&(this.sortable||this.groupable||this.filterable)){d();k+=" jqxmenu.js"}if(!this.host.jqxScrollBar){d();k+=" jqxscrollbar.js"}if(!this.host.jqxButton){d();k+=" jqxbuttons.js"}if(!b.jqx.dataAdapter){d();k+=" jqxdata.js"}if(this.pageable&&!this.gotopage){d();k+="jqxgrid.pager.js"}if(this.filterable&&!this.applyfilters){d();k+=" jqxgrid.filter.js"}if(this.groupable&&!this._initgroupsheader){d();k+=" jqxgrid.grouping.js"}if(this.columnsresize&&!this.autoresizecolumns){d();k+=" jqxgrid.columnsresize.js"}if(this.columnsreorder&&!this.setcolumnindex){d();k+=" jqxgrid.columnsreorder.js"}if(this.sortable&&!this.sortby){d();k+=" jqxgrid.sort.js"}if(this.editable&&!this.begincelledit){d();k+=" jqxgrid.edit.js"}if(this.showaggregates&&!this.getcolumnaggregateddata){d();k+=" jqxgrid.aggregates.js"}if(this.keyboardnavigation&&!this.selectrow){d();k+=" jqxgrid.selection.js"}if(k!=""||this.editable||this.filterable||this.pageable){var f=[];var j=function(i){switch(i){case"checkbox":if(!h.host.jqxCheckBox&&!f.checkbox){f.checkbox=true;d();k+=" jqxcheckbox.js"}break;case"numberinput":if(!h.host.jqxNumberInput&&!f.numberinput){f.numberinput=true;d();k+=" jqxnumberinput.js"}break;case"datetimeinput":if(!h.host.jqxDateTimeInput&&!f.datetimeinput){d();f.datetimeinput=true;k+=" jqxdatetimeinput.js(requires: jqxcalendar.js, jquery.global.js)"}else{if(!b.global&&!f.global){d();k+=" jquery.global.js"}else{if(!h.host.jqxCalendar&&!f.calendar){d();k+=" jqxcalendar.js"}}}break;case"combobox":if(!h.host.jqxComboBox&&!f.combobox){d();f.combobox=true;k+=" jqxcombobox.js(requires: jqxlistbox.js)"}else{if(!h.host.jqxListBox&&!f.listbox){d();f.listbox=true;k+=" jqxlistbox.js"}}break;case"dropdownlist":if(!h.host.jqxDropDownList&&!f.dropdownlist){d();f.dropdownlist=true;k+=" jqxdropdownlist.js(requires: jqxlistbox.js)"}else{if(!h.host.jqxListBox&&!f.listbox){d();f.listbox=true;k+=" jqxlistbox.js"}}break}};if(this.filterable||this.pageable){j("dropdownlist")}for(var e=0;e<this.columns.length;e++){var g=this.columns[e].columntype;j(g);if(this.filterable&&this.showfilterrow){var g=this.columns[e].filtertype;if(g=="checkedlist"||g=="bool"){j("checkbox")}if(g=="date"){j("datetimeinput")}}}if(k!=""){alert("Please, add references to the following module(s): "+k);this.host.remove();return true}}return false},focus:function(){this.wrapper.focus();var d=this;setTimeout(function(){d.wrapper.focus()},10);this.focused=true},hiddenParent:function(){var e=this;if(e.host.css("display")!="block"){return true}var d=false;b.each(e.host.parents(),function(){if(b(this).css("display")=="none"){d=true;return false}});return d},_updatesize:function(i,h){if(this._loading){return}var f=this;if(this.hiddenParent()){return}var g=f.host.width();var e=f.host.height();if(!f._oldWidth){f._oldWidth=g}if(!f._oldHeight){f._oldHeight=e}if(f._resizeTimer){clearTimeout(f._resizeTimer)}var d=b.browser.msie?10:10;f._resizeTimer=setTimeout(function(){if(g!=f._oldWidth||i==true){f._arrange();f._updatecolumnwidths();f._updatecellwidths();if(!(i==false&&f._oldWidth>g)){f._renderrows(f.virtualsizeinfo)}}if(e!=f._oldHeight||h==true){var k=f.groupable&&f.groups.length>0;var j=f.vScrollBar.css("visibility")!="visible";if(!f.autoheight){if(!k){f._arrange();f.virtualsizeinfo=f._calculatevirtualheight();if(parseInt(e)>=parseInt(f._oldHeight)){f.prerenderrequired=true}f._renderrows(f.virtualsizeinfo)}else{if(value>=oldvalue){f._render(true,false,false)}else{f.rendergridcontent(true,false)}}if(j&&f.vScrollBar.css("visibility")=="visible"){f._arrange();f._updatecolumnwidths();f._updatecellwidths()}}}f._oldWidth=g;f._oldHeight=e},d)},_fieldsmapping:function(){if(this.showToolbar){this._mapField("showtoolbar",this.showToolbar)}if(this.toolbarHeight){this._mapField("toolbarheight",this.toolbarHeight)}if(this.pagerHeight){this._mapField("pagerHeight",this.pagerHeight)}if(this.groupsHeaderHeight){this._mapField("groupsHeaderHeight",this.groupsHeaderHeight)}if(this.pageSize){this._mapField("pageSize",this.pageSize)}if(this.pagerHeight){this._mapField("pagerHeight",this.pagerHeight)}if(this.pageSizeOptions){this._mapField("pageSizeOptions",this.pageSizeOptions)}if(this.rowsHeight){this._mapField("rowsHeight",this.rowsHeight)}if(this.columnsHeight){this._mapField("columnsHeight",this.columnsHeight)}if(this.groupIndentWidth){this._mapField("groupIndentWidth",this.groupIndentWidth)}if(this.rowDetails){this._mapField("rowDetails",this.rowDetails)}if(this.enableRowDetailsIndent){this._mapField("enableRowDetailsIndent",this.enableRowDetailsIndent)}if(this.enableMouseWheel){this._mapField("enableMouseWheel",this.enableMouseWheel)}if(this.initRowDetails){this._mapField("initRowDetails",this.initRowDetails)}if(this.editMode){this._mapField("editMode",this.editMode)}if(this.autoShowFilterIcon){this._mapField("autoShowFilterIcon",this.autoShowFilterIcon)}if(this.showFilterColumnBackground){this._mapField("showFilterColumnBackground",this.showFilterColumnBackground)}if(this.showPinnedColumnBackground){this._mapField("showPinnedColumnBackground",this.showPinnedColumnBackground)}if(this.showSortColumnBackground){this._mapField("showSortColumnBackground",this.showSortColumnBackground)}if(this.altRows){this._mapField("altRows",this.altRows)}if(this.altStart){this._mapField("altStart",this.altStart)}if(this.altStep){this._mapField("altStep",this.altStep)}if(this.showRowDetailsColumn){this._mapField("showRowDetailsColumn",this.showRowDetailsColumn)}if(this.groupsRenderer){this._mapField("groupsRenderer",this.groupsRenderer)}if(this.groupColumnRenderer){this._mapField("groupColumnRenderer",this.groupColumnRenderer)}if(this.groupsExpandedByDefault){this._mapField("groupsExpandedByDefault",this.groupsExpandedByDefault)}if(this.pagerRenderer){this._mapField("pagerRenderer",this.pagerRenderer)}if(this.updateDelay){this._mapField("updateDelay",this.updateDelay)}if(this.autoHeight){this._mapField("autoHeight",this.autoHeight)}if(this.showHeader){this._mapField("showHeader",this.showHeader)}if(this.showGroupsHeader){this._mapField("showGroupsHeader",this.showGroupsHeader)}if(this.closeableGroups){this._mapField("closeableGroups",this.closeableGroups)}if(this.scrollbarSize){this._mapField("scrollbarSize",this.scrollbarSize)}if(this.virtualMode){this._mapField("virtualMode",this.virtualMode)}if(this.columnsMenu){this._mapField("columnsMenu",this.columnsMenu)}if(this.columnsResize){this._mapField("columnsResize",this.columnsResize)}if(this.columnsMenuWidth){this._mapField("columnsMenuWidth",this.columnsMenuWidth)}if(this.sortToggleStates){this._mapField("sortToggleStates",this.sortToggleStates)}if(this.renderGridRows){this._mapField("renderGridRows",this.renderGridRows)}if(this.enableAnimations){this._mapField("enableAnimations",this.enableAnimations)}if(this.enableTooltips){this._mapField("enableTooltips",this.enableTooltips)}if(this.selectionMode){this._mapField("selectionMode",this.selectionMode)}if(this.enableHover){this._mapField("enableHover",this.enableHover)}if(this.loadingErrorMessage){this._mapField("loadingErrorMessage",this.loadingErrorMessage)}if(this.verticalScrollBarStep){this._mapField("verticalScrollBarStep",this.verticalScrollBarStep)}if(this.verticalScrollBarLargeStep){this._mapField("verticalScrollBarLargeStep",this.verticalScrollBarLargeStep)}if(this.horizontalScrollBarStep){this._mapField("horizontalScrollBarStep",this.horizontalScrollBarStep)}if(this.horizontalScrollbarLargeStep){this._mapField("horizontalScrollbarLargeStep",this.horizontalScrollbarLargeStep)}if(this.keyboardNavigation){this._mapField("keyboardNavigation",this.keyboardNavigation)}},_mapField:function(d,e){if(d==null){return false}this[d.toLowerCase()]=e},getTouches:function(d){if(d.originalEvent){if(d.originalEvent.touches&&d.originalEvent.touches.length){return d.originalEvent.touches}else{if(d.originalEvent.changedTouches&&d.originalEvent.changedTouches.length){return d.originalEvent.changedTouches}}}if(!d.touches){d.touches=new Array();d.touches[0]=d.originalEvent}return d.touches},_updateTouchScrolling:function(){var d=this;if(d.isTouchDevice()){d.enablehover=false;if(d.gridcontent){d.gridcontent.unbind("touchstart.touchScroll");d.gridcontent.unbind("touchmove.touchScroll");d.gridcontent.unbind("touchend.touchScroll");d.gridcontent.unbind("touchcancel.touchScroll");b.jqx.mobile.touchScroll(d.gridcontent[0],d.vScrollInstance.max,function(g,f){if(d.vScrollBar.css("visibility")=="visible"){var e=d.vScrollInstance.value;d.vScrollInstance.setPosition(e+f)}if(d.hScrollBar.css("visibility")=="visible"){var e=d.hScrollInstance.value;d.hScrollInstance.setPosition(e+g)}d._lastScroll=new Date()})}}},isTouchDevice:function(){if(this.touchDevice!=undefined){return this.touchDevice}var d=b.jqx.mobile.isTouchDevice();this.touchDevice=d;if(this.touchmode==true){d=true;b.jqx.mobile.setMobileSimulator(this.element);this.touchDevice=d}else{if(this.touchmode==false){d=false}}if(d&&this.touchModeStyle!=false){this.scrollbarsize=10;this.host.addClass(this.toThemeProperty("jqx-touch"));this.host.find("jqx-widget-content").addClass(this.toThemeProperty("jqx-touch"));this.host.find("jqx-widget-header").addClass(this.toThemeProperty("jqx-touch"))}return d},toTP:function(d){return this.toThemeProperty(d)},localizestrings:function(d){this._cellscache=new Array();if(b.jqx.dataFormat){b.jqx.dataFormat.cleardatescache()}if(this._loading){alert(this.loadingerrormessage);return false}if(d!=null){if(d.pagergotopagestring){this.gridlocalization.pagergotopagestring=d.pagergotopagestring}if(d.pagershowrowsstring){this.gridlocalization.pagershowrowsstring=d.pagershowrowsstring}if(d.pagerrangestring){this.gridlocalization.pagerrangestring=d.pagerrangestring}if(d.pagernextbuttonstring){this.gridlocalization.pagernextbuttonstring=d.pagernextbuttonstring}if(d.pagerpreviousbuttonstring){this.gridlocalization.pagerpreviousbuttonstring=d.pagerpreviousbuttonstring}if(d.groupsheaderstring){this.gridlocalization.groupsheaderstring=d.groupsheaderstring}if(d.sortascendingstring){this.gridlocalization.sortascendingstring=d.sortascendingstring}if(d.sortdescendingstring){this.gridlocalization.sortdescendingstring=d.sortdescendingstring}if(d.sortremovestring){this.gridlocalization.sortremovestring=d.sortremovestring}if(d.groupbystring){this.gridlocalization.groupbystring=d.groupbystring}if(d.groupremovestring){this.gridlocalization.groupremovestring=d.groupremovestring}if(d.firstDay){this.gridlocalization.firstDay=d.firstDay}if(d.days){this.gridlocalization.days=d.days}if(d.months){this.gridlocalization.months=d.months}if(d.AM){this.gridlocalization.AM=d.AM}if(d.PM){this.gridlocalization.PM=d.PM}if(d.patterns){this.gridlocalization.patterns=d.patterns}if(d.percentsymbol){this.gridlocalization.percentsymbol=d.percentsymbol}if(d.currencysymbol){this.gridlocalization.currencysymbol=d.currencysymbol}if(d.currencysymbolposition){this.gridlocalization.currencysymbolposition=d.currencysymbolposition}if(d.decimalseparator){this.gridlocalization.decimalseparator=d.decimalseparator}if(d.thousandsseparator){this.gridlocalization.thousandsseparator=d.thousandsseparator}if(d.filterclearstring){this.gridlocalization.filterclearstring=d.filterclearstring}if(d.filterstring){this.gridlocalization.filterstring=d.filterstring}if(d.filtershowrowstring){this.gridlocalization.filtershowrowstring=d.filtershowrowstring}if(d.filterselectallstring){this.gridlocalization.filterselectallstring=d.filterselectallstring}if(d.filterchoosestring){this.gridlocalization.filterchoosestring=d.filterchoosestring}if(d.filterorconditionstring){this.gridlocalization.filterorconditionstring=d.filterorconditionstring}if(d.filterandconditionstring){this.gridlocalization.filterandconditionstring=d.filterandconditionstring}if(d.filterstringcomparisonoperators){this.gridlocalization.filterstringcomparisonoperators=d.filterstringcomparisonoperators}if(d.filternumericcomparisonoperators){this.gridlocalization.filternumericcomparisonoperators=d.filternumericcomparisonoperators}if(d.filterdatecomparisonoperators){this.gridlocalization.filterdatecomparisonoperators=d.filterdatecomparisonoperators}if(d.filterbooleancomparisonoperators){this.gridlocalization.filterbooleancomparisonoperators=d.filterbooleancomparisonoperators}if(d.emptydatastring){this.gridlocalization.emptydatastring=d.emptydatastring}if(d.filterselectstring){this.gridlocalization.filterselectstring=d.filterselectstring}if(this._initpager){this._initpager()}if(this._initgroupsheader){this._initgroupsheader()}if(this._initmenu){this._initmenu()}if(d.validationstring){this.gridlocalization.validationstring=d.validationstring}if(this.filterable&&this.showfilterrow){if(this._updatefilterrow){for(var e in this._filterrowcache){b(this._filterrowcache[e]).remove()}this._filterrowcache=[];this._updatefilterrow()}}if(this.showaggregates&&this.refresheaggregates){this.refresheaggregates()}this._renderrows(this.virtualsizeinfo)}else{this.gridlocalization={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy\u0027-\u0027MM\u0027-\u0027dd\u0027T\u0027HH\u0027:\u0027mm\u0027:\u0027ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"dd-MMMM-yyyy",d4:"dd-MM-yy",d5:"H:mm",d6:"HH:mm",d7:"HH:mm tt",d8:"dd/MMMM/yyyy",d9:"MMMM-dd",d10:"MM-dd",d11:"MM-dd-yyyy"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",pagergotopagestring:"Go to page:",pagershowrowsstring:"Show rows:",pagerrangestring:" of ",pagerpreviousbuttonstring:"previous",pagernextbuttonstring:"next",groupsheaderstring:"Drag a column and drop it here to group by that column",sortascendingstring:"Sort Ascending",sortdescendingstring:"Sort Descending",sortremovestring:"Remove Sort",groupbystring:"Group By this column",groupremovestring:"Remove from groups",filterclearstring:"Clear",filterstring:"Filter",filtershowrowstring:"Show rows where:",filterorconditionstring:"Or",filterandconditionstring:"And",filterselectallstring:"(Select All)",filterchoosestring:"Please Choose:",filterstringcomparisonoperators:["empty","not empty","contains","contains(match case)","does not contain","does not contain(match case)","starts with","starts with(match case)","ends with","ends with(match case)","equal","equal(match case)","null","not null"],filternumericcomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterdatecomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterbooleancomparisonoperators:["equal","not equal"],validationstring:"Entered value is not valid",emptydatastring:"No data to display",filterselectstring:"Select Filter"}}},_initmenu:function(){var q=this;if(this.host.jqxMenu){if(this.gridmenu){if(this.filterable){if(this._destroyfilterpanel){this._destroyfilterpanel()}}this.gridmenu.jqxMenu("destroy");this.gridmenu.remove()}this.menuitemsarray=new Array();this.gridmenu=b('<div id="gridmenu'+this.element.id+'" style="z-index: 9999999999999;"></div>');this.host.append(this.gridmenu);var u=b("<ul></ul>");var h='<div class="jqx-grid-sortasc-icon"></div>';var s=b("<li>"+h+this.gridlocalization.sortascendingstring+"</li>");var x='<div class="jqx-grid-sortdesc-icon"></div>';var v=b("<li>"+x+this.gridlocalization.sortdescendingstring+"</li>");var m='<div class="jqx-grid-sortremove-icon"></div>';var j=b("<li>"+m+this.gridlocalization.sortremovestring+"</li>");var i='<div class="jqx-grid-groupby-icon"></div>';var p=b("<li>"+i+this.gridlocalization.groupbystring+"</li>");var f=b("<li>"+i+this.gridlocalization.groupremovestring+"</li>");var d=b('<li type="separator"></li>');var t=b('<li class="filter" style="height: 170px;" ignoretheme="true"><div class="filter"></div></li>');var l=this.gridlocalization.sortascendingstring.length;var r=this.gridlocalization.sortascendingstring;if(this.gridlocalization.sortdescendingstring.length>l){l=this.gridlocalization.sortdescendingstring.length;r=this.gridlocalization.sortdescendingstring}if(this.gridlocalization.sortremovestring.length>l){l=this.gridlocalization.sortremovestring.length;r=this.gridlocalization.sortremovestring}if(this.groupable&&this._initgroupsheader&&this.showgroupmenuitems){if(this.gridlocalization.groupbystring.length>l){l=this.gridlocalization.groupbystring.length;r=this.gridlocalization.groupbystring}if(this.gridlocalization.groupremovestring.length>l){l=this.gridlocalization.groupremovestring.length;r=this.gridlocalization.groupremovestring}}var w=200;r=b.trim(r).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");var g=b("<span>"+r+"</span>");g.addClass(this.toThemeProperty("jqx-menu-item"));this.host.append(g);w=g.outerWidth()+60;g.remove();var e=0;if(this.sortable&&this._togglesort&&this.showsortmenuitems){u.append(s);this.menuitemsarray[0]=s[0];u.append(v);this.menuitemsarray[1]=v[0];u.append(j);this.menuitemsarray[2]=j[0];e=3}if(this.groupable&&this._initgroupsheader&&this.showgroupmenuitems){u.append(p);this.menuitemsarray[3]=p[0];u.append(f);this.menuitemsarray[4]=f[0];e+=2}var k=e*27+3;var o=true;if(this.filterable&&!this.showfilterrow&&this.showfiltermenuitems){if(this._initfilterpanel){this.menuitemsarray[5]=t[0];this.menuitemsarray[6]=t[0];u.append(d);u.append(t);k+=176;if(b.browser.msie&&b.browser.version<8){k+=20}var n=b(t).find("div:first");w+=20;this._initfilterpanel(this,n,"",w);o=false;this.removeHandler(b(document),"click.menu"+q.element.id,q._closemenuafterclick,q);this.addHandler(b(document),"click.menu"+q.element.id,q._closemenuafterclick,q)}else{alert("jqxgrid.filter.js is not loaded.")}}this.gridmenu.append(u);if(b.browser.msie&&b.browser.version<8&&this.filterable){b("#listBoxfilter1"+this.element.id).css("z-index",4990);b("#listBoxfilter2"+this.element.id).css("z-index",4990);b("#listBoxfilter3"+this.element.id).css("z-index",4990);b("#gridmenu"+this.element.id).css("z-index",5000);b("#gridmenu"+this.element.id).bind("initialized",function(){b("#menuWrappergridmenu"+q.element.id).css("z-index",4980)})}if(this.menuitemsarray[0]==undefined){k=65}this.addHandler(this.gridmenu,"keydown",function(C){if(C.keyCode==27){q.gridmenu.jqxMenu("close")}else{if(C.keyCode==13&&q.filterable){if(q._buildfilter){var B=b(b.find("#filter1"+q.element.id)).jqxDropDownList("container").css("display")=="block";var A=b(b.find("#filter2"+q.element.id)).jqxDropDownList("container").css("display")=="block";var y=b(b.find("#filter3"+q.element.id)).jqxDropDownList("container").css("display")=="block";var D=b(b.find("#filterclearbutton"+q.element.id)).hasClass("jqx-fill-state-focus");if(D){var z=b.data(document.body,"contextmenu"+q.element.id).column;q._clearfilter(q,q.element,z);q.gridmenu.jqxMenu("close")}else{if(!B&&!A&&!y){var z=b.data(document.body,"contextmenu"+q.element.id).column;q.gridmenu.jqxMenu("close");q._buildfilter(q,t,z)}}}}}});if(this.popupwidth!="auto"){w=this.popupwidth}this.gridmenu.jqxMenu({width:w,height:k,autoCloseOnClick:o,autoOpenPopup:false,mode:"popup",theme:this.theme,animationShowDuration:0,animationHideDuration:0,animationShowDelay:0});if(this.filterable){this.gridmenu.jqxMenu("_setItemProperty",t[0].id,"closeOnClick",false)}this._handlemenueevents()}else{this.columnsmenu=false}},_arrangemenu:function(){var i=this.gridlocalization.sortascendingstring.length;var d=this.gridlocalization.sortascendingstring;if(this.gridlocalization.sortdescendingstring.length>i){i=this.gridlocalization.sortdescendingstring.length;d=this.gridlocalization.sortdescendingstring}if(this.gridlocalization.sortremovestring.length>i){i=this.gridlocalization.sortremovestring.length;d=this.gridlocalization.sortremovestring}if(this.groupable&&this._initgroupsheader){if(this.gridlocalization.groupbystring.length>i){i=this.gridlocalization.groupbystring.length;d=this.gridlocalization.groupbystring}if(this.gridlocalization.groupremovestring.length>i){i=this.gridlocalization.groupremovestring.length;d=this.gridlocalization.groupremovestring}}var e=200;d=b.trim(d).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");var f=b("<span>"+d+"</span>");f.addClass(this.toThemeProperty("jqx-menu-item"));this.host.append(f);e=f.outerWidth()+60;f.remove();var g=0;if(this.sortable&&this._togglesort&&this.showsortmenuitems){g=3}if(this.groupable&&this._initgroupsheader&&this.showgroupmenuitems){g+=2}var h=g*27+3;if(this.filterable&&this.showfiltermenuitems){if(this._initfilterpanel){h+=176;e+=20;if(b.browser.msie&&b.browser.version<8){h+=20}}}if(this.menuitemsarray[0]==undefined){h=65}if(this.popupwidth!="auto"){e=this.popupwidth}this.gridmenu.jqxMenu({width:e,height:h})},_closemenuafterclick:function(e){var h=e!=null?e.data:this;var f=false;if(e.target.className.indexOf("filter")!=-1){return}if(e.target.className.indexOf("jqx-grid-cell")!=-1){h.gridmenu.jqxMenu("close");return}var d=h.host.offset();var j=e.pageX;var i=e.pageY;b.each(b(e.target).parents(),function(){if(this.id!=null&&this.id.indexOf("filter")!=-1){f=true;return false}if(this.className.indexOf("filter")!=-1){f=true;return false}if(this.className.indexOf("jqx-grid-cell")!=-1){h.gridmenu.jqxMenu("close");return false}if(this.className.indexOf("jqx-grid-column")!=-1){h.gridmenu.jqxMenu("close");return false}});if(f){return}try{var l=b(b.find("#filter1"+h.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup;if(new Date()-l<100){return}var k=b(b.find("#filter3"+h.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup;if(new Date()-k<100){return}}catch(g){}h.gridmenu.jqxMenu("close")},_handlemenueevents:function(){var d=this;this.removeHandler(this.gridmenu,"closed");this.addHandler(this.gridmenu,"closed",function(e){d._closemenu()});this.removeHandler(this.gridmenu,"itemclick");this.addHandler(this.gridmenu,"itemclick",function(h){var g=h.args;for(var e=0;e<d.menuitemsarray.length;e++){var j=d.menuitemsarray[e];if(g==j){if(b(g).attr("ignoretheme")!=undefined){return}var k=b.data(document.body,"contextmenu"+d.element.id);var f=k.column;if(d.filterable){d.gridmenu.jqxMenu("close")}if(k!=null){switch(e){case 0:d.sortby(f.datafield,"ascending",null);break;case 1:d.sortby(f.datafield,"descending",null);break;case 2:d.sortby(f.datafield,null,null);break;case 3:d.addgroup(f.datafield);break;case 4:d.removegroup(f.datafield);break;case 5:var l=b(d.menuitemsarray[6]);b(l).css("display","block");break;case 7:break}}break}}})},getdatainformation:function(){var d=this.dataview.totalrecords;if(this.summaryrows){d+=this.summaryrows.length}return{rowscount:d,sortinformation:this.getsortinformation(),paginginformation:this.getpaginginformation()}},getsortinformation:function(){return{sortcolumn:this.sortcolumn,sortdirection:this.sortdirection}},getpaginginformation:function(){return{pagenum:this.dataview.pagenum,pagesize:this.pagesize,pagescount:Math.ceil(this.dataview.totalrecords/this.pagesize)}},_updaterowsproperties:function(){this._updatehiddenrows();this._updaterowheights();this._updaterowdetails()},_updatehiddenrows:function(){var e=this;this.hiddens=new Array();var d=this.hiddenboundrows;b.each(d,function(g){if(this.index!=undefined){var f=this.index;var h=e.getrowvisibleindex(g);e.hiddens[h]=this.hidden}})},_updaterowheights:function(){var e=this;this.heights=new Array();var d=this.heightboundrows;b.each(d,function(g){if(this.index!=undefined){var f=this.index;var h=e.getrowvisibleindex(g);e.heights[h]=this.height}})},_updaterowdetails:function(){var d=this;this.details=new Array();var e=this.detailboundrows;b.each(e,function(g){if(this.index!=undefined){var f=this.index;var h=d.getrowvisibleindex(g);d.details[h]=this.details}})},_getmenuitembyindex:function(d){if(d==undefined){return null}return this.menuitemsarray[d]},_closemenu:function(){if(this._hasOpenedMenu){if(this.gridmenu!=null){this.gridmenu.jqxMenu("close")}var g=b.data(document.body,"contextmenu"+this.element.id);var e=16;if(g!=null&&this.autoshowcolumnsmenubutton){if(this.enableanimations){b(g.columnsmenu).animate({"margin-left":0},"fast",function(){b(g.columnsmenu).css("display","none")});g.column.iconscontainer.animate({"margin-left":-32},"fast")}else{b(g.columnsmenu).css("display","none");g.column.iconscontainer.css("margin-left",-32)}b.data(document.body,"contextmenu"+this.element.id,null)}this._hasOpenedMenu=false;var i=this._getmenuitembyindex(5);if(i){var h=b(i).find("#filter1"+this.element.id);var d=b(i).find("#filter2"+this.element.id);var f=b(i).find("#filter3"+this.element.id);h.jqxDropDownList("hideListBox");d.jqxDropDownList("hideListBox");f.jqxDropDownList("hideListBox")}}},scrolloffset:function(e,d){if(e==null||d==null||e==undefined||d==undefined){return}this.vScrollBar.jqxScrollBar("setPosition",e);this.hScrollBar.jqxScrollBar("setPosition",d)},scrollleft:function(d){if(d==null||d==undefined){return}this.hScrollBar.jqxScrollBar("setPosition",d)},scrolltop:function(d){if(d==null||d==undefined){return}this.vScrollBar.jqxScrollBar("setPosition",d)},beginupdate:function(){this._updating=true;this._datachanged=false},endupdate:function(){this.resumeupdate()},resumeupdate:function(){this._updating=false;if(this._datachanged==true){var d=this.vScrollInstance.value;this.render(true,true,false);this._datachanged=false;if(d!=0&&d<this.vScrollInstance.max){this.scrolltop(d)}}else{this.rendergridcontent(true);this._renderrows(this.virtualsizeinfo)}},updating:function(){return this._updating},showloadelement:function(){if(this.renderloadelement){this.dataloadelement.html(this.renderloadelement())}b(this.dataloadelement).css("visibility","visible");b(this.dataloadelement).css("display","block")},hideloadelement:function(){b(this.dataloadelement).css("visibility","hidden");b(this.dataloadelement).css("display","none")},databind:function(e,f){if(this.host.css("display")=="block"){if(this.autoshowloadelement){b(this.dataloadelement).css("visibility","visible");b(this.dataloadelement).css("display","block");this.dataloadelement.width(this.host.width());this.dataloadelement.height(this.host.height())}}if(!this._initgroupsheader&&this.groups.length>0){this.groups=new Array()}var d=this;if(e==null){e=new Array()}if(!e.recordstartindex){e.recordstartindex=0}if(!e.recordendindex){e.recordendindex=0}if(e.loadallrecords==undefined||e.loadallrecords==null){e.loadallrecords=true}if(e.sortcomparer==undefined||e.sortcomparer==null){e.sortcomparer=null}if(e.filter==undefined||e.filter==null){e.filter=null}if(e.sort==undefined||e.sort==null){e.sort=null}if(e.data==undefined||e.data==null){e.data=null}this.dataview=this.dataview||new b.jqx.dataview();if(b.jqx.dataview.sort){b.extend(this.dataview,new b.jqx.dataview.sort())}if(b.jqx.dataview.grouping){b.extend(this.dataview,new b.jqx.dataview.grouping())}this.dataview.suspendupdate();this.dataview.pageable=this.pageable;this.dataview.groupable=this.groupable;this.dataview.groups=this.groups;this.dataview.virtualmode=this.virtualmode;this.dataview.grid=this;this.dataview._clearcaches();if(!d.initializedcall){if(this.pageable){if(e._source){if(e._source.pagenum!=undefined){this.dataview.pagenum=e._source.pagenum}if(e._source.pagesize!=undefined){this.pagesize=e._source.pagesize;this.dataview.pagesize=e._source.pagesize}else{this.dataview.pagesize=e._source.pagesize;if(this.dataview.pagesize==undefined){this.dataview.pagesize=this.pagesize}}}}if(e.sortcolumn){this.dataview.sortfield=e.sortcolumn}if(e.sortdirection){this.dataview.sortfielddirection=e.sortdirection}if(this.autoloadstate){if(this.loadstate){this.loadstate()}}}this._loading=true;this.dataview.update=function(){d._loading=false;if(d.dataview.isupdating()){d.dataview.resumeupdate(false)}if(d.pageable&&d.pagerrenderer){if(d._initpager){d._initpager()}else{alert("jqxgrid.pager.js is not loaded.")}}if(d.source.sortcolumn&&d.sortby&&!d.virtualmode){d.render();d.sortby(d.source.sortcolumn,d.source.sortdirection,d.source.sortcomparer);d.source.sortcolumn=null}else{var h=d.vScrollInstance.value;var i=d.hScrollInstance.value;var j=d.source.datatype;if(j!="local"||j!="array"){var k=d.virtualsizeinfo==null||(d.virtualsizeinfo!=null&&d.virtualsizeinfo.virtualheight==0);if(!d.virtualmode||k||(d.virtualmode&&d.pageable)){if(d.initializedcall==true&&f=="pagechanged"){d._render(true,true,false,false)}else{d._render(true,true,true,d.menuitemsarray&&!d.virtualmode)}}else{if(d.virtualmode&&d.dataview.totalrecords==0&&d.dataview.filters.length>0){d._render(true,true,true,d.menuitemsarray&&!d.virtualmode)}else{d._pagescache=new Array();d._renderrows(d.virtualsizeinfo)}}if(d.vScrollInstance.value!=h&&h<=d.vScrollInstance.max){d.vScrollInstance.setPosition(h)}if(d.hScrollInstance.value!=i&&i<=d.hScrollInstance.max){d.hScrollInstance.setPosition(i)}}}if(d.autoshowloadelement){b(d.dataloadelement).css("visibility","hidden");b(d.dataloadelement).css("display","none")}if(d.pageable){if(d.pagerrightbutton){d.pagerrightbutton.jqxButton({disabled:false});d.pagerleftbutton.jqxButton({disabled:false});d.pagershowrowscombo.jqxDropDownList({disabled:false})}}d._raiseEvent(11);if(!d.initializedcall){d._raiseEvent(0);d.initializedcall=true;if(d.ready){d.ready()}if(d.autoloadstate){if(d.loadstate){d._loadselectionandcolumnwidths()}}if((d.width!=null&&d.width.toString().indexOf("%")!=-1)||(d.height!=null&&d.height.toString().indexOf("%")!=-1)){d._updatesize(true)}if(d.host.css("visibility")=="hidden"){var g=b.browser.msie&&b.browser.version<8;if(d.vScrollBar.css("visibility")=="visible"){d.vScrollBar.css("visibility","inherit")}if(d.hScrollBar.css("visibility")=="visible"){d.hScrollBar.css("visibility","inherit")}d._intervalTimer=setInterval(function(){if(d.host.css("visibility")=="visible"){d._updatesize(true);clearInterval(d._intervalTimer)}},100)}}else{d._updateTouchScrolling()}};this.dataview.databind(e);if(this.dataview.isupdating()){this.dataview.resumeupdate(false)}this._initializeRows()},scrollto:function(e,d){if(undefined!=e){this.hScrollInstance.setPosition(e)}if(undefined!=d){this.vScrollInstance.setPosition(d)}},scrollposition:function(){return{top:this.vScrollInstance.value,left:this.hScrollInstance.value}},ensurerowvisible:function(h){var e=this._getpagesize();var g=Math.floor(h/e);if(!this._pageviews[g]&&!this.pageable){this._updatepageviews()}var n=false;if(this.pageable&&this.gotopage&&!this.virtualmode){if(this.dataview.pagenum!=g){this.gotopage(g);n=true}}var l=this.vScrollInstance.value;var m=this._gettableheight()-this.rowsheight;var d=e*(h/e-g);d=Math.round(d);if(this._pageviews[g]){var k=this._pageviews[g].top;var j=k+d*this.rowsheight;if(this.rowdetails){for(var f=e*g;f<h;f++){if(this.details[f]){if(this.details[f].rowdetailshidden==false){j+=this.details[f].rowdetailsheight}}}}if(j<l){this.scrolltop(j);n=true}else{if(j>l+m+2){this.scrolltop(j-m);n=true}}}else{if(this.pageable){var j=d*this.rowsheight;if(this.rowdetails){for(var f=e*g;f<e*g+d;f++){if(this.details[f].rowdetailshidden==false){j+=this.details[f].rowdetailsheight}}}if(j<l||j>l+m){this.scrollto(0,j);n=true}}}return n},ensurecellvisible:function(h,d){var i=this.hScrollBar.jqxScrollBar("value");var n=this.ensurerowvisible(h);var e=0;var m=this;if(this.columns.records){var k=i;var l=this.host.width();var j=0;var f=this.vScrollBar.css("visibility")=="visible"?20:0;var g=false;b.each(this.columns.records,function(){if(this.datafield==d){var o=0;if(e+this.width>k+l-f){o=e+this.width-k-l+f;m.scrollleft(o+k);g=true}else{if(e<=k){o=e-this.width;m.scrollleft(o);g=true}}if(j==0){m.scrollleft(0);g=true}else{if(j==m.columns.records.length-1){if(m.hScrollBar.css("visibility")=="visible"){m.scrollleft(m.hScrollBar.jqxScrollBar("max"));g=true}}}return false}j++;e+=this.width});if(!g){m.scrollleft(k)}}return n},setrowheight:function(e,d){if(this._loading){alert(this.loadingerrormessage);return false}if(e==null||d==null){return false}this.heightboundrows[e]={index:e,height:d};e=this.getrowvisibleindex(e);if(e<0){return false}if(this.rows.records[e]){this.rows.records[e].height=d}else{row=new a(this,null);row.height=d;this.rows.replace(e,row)}this.heights[e]=d;this.rendergridcontent(true);return true},getrowheight:function(d){if(d==null){return null}d=this.getrowvisibleindex(d);if(d<0){return false}if(this.rows.records[d]){return this.rows.records[d].height}},setrowdetails:function(e,f,d,h){if(e==undefined||e==null||e<0){return}var g=this.dataview.generatekey();this.detailboundrows[e]={index:e,details:{rowdetails:f,rowdetailsheight:d,rowdetailshidden:h,key:g}};e=this.getrowvisibleindex(e);if(e<0){return false}return this._setrowdetails(e,f,d,h,g)},getcolumn:function(d){var e=null;if(this.columns.records){b.each(this.columns.records,function(){if(this.datafield==d){e=this;return false}})}return e},_getcolumnindex:function(e){var d=-1;if(this.columns.records){b.each(this.columns.records,function(){d++;if(this.datafield==e){return false}})}return d},_getcolumnat:function(d){var e=this.columns.records[d];return e},_getprevvisiblecolumn:function(e){var d=this;while(e>0){e--;var f=d.getcolumnat(e);if(!f){return null}if(!f.hidden){return f}}return null},_getnextvisiblecolumn:function(e){var d=this;while(e<this.columns.records.length){e++;var f=d.getcolumnat(e);if(!f){return null}if(!f.hidden){return f}}return null},getcolumnat:function(d){if(!isNaN(d)){var e=this.columns.records[d];return e}return null},_getcolumn:function(d){var e=null;b.each(this._columns,function(){if(this.datafield==d||this.dataField==d){e=this;return false}});return e},_setcolumnproperty:function(e,g,h){if(e==null||g==null||h==null){return null}var f=this.getcolumn(e);if(f==null){return}f[g]=h;var d=this._getcolumn(e);if(d!=null){d[g]=h}this._cellscache=new Array();switch(g){case"text":this.prerenderrequired=true;this._rendercolumnheaders();if(this._groupsheader()){if(this._initgroupsheader){this._initgroupsheader()}}break;case"hidden":case"hideable":case"renderer":case"cellsrenderer":case"align":case"cellsalign":case"cellsformat":case"pinned":case"contenttype":case"resizable":case"filterable":case"groupable":case"editable":case"cellclass":case"class":this.prerenderrequired=true;this.rendergridcontent(true);if(this.updating()){return false}this._renderrows(this.virtualsizeinfo);break;case"width":case"minwidth":case"maxwidth":if(this.updating()){return false}this._updatecolumnwidths();this._updatecellwidths();this._renderrows(this.virtualsizeinfo);break}},_getcolumnproperty:function(d,f){if(d==null||f==null){return null}var e=this.getcolumn(d);return e[f]},setcolumnproperty:function(d,e,f){this._setcolumnproperty(d,e,f)},getcolumnproperty:function(d,e){return this._getcolumnproperty(d,e)},hidecolumn:function(d){this._setcolumnproperty(d,"hidden",true)},showcolumn:function(d){this._setcolumnproperty(d,"hidden",false)},iscolumnvisible:function(d){return !this._getcolumnproperty(d,"hidden")},pincolumn:function(d){this._setcolumnproperty(d,"pinned",true)},unpincolumn:function(d){this._setcolumnproperty(d,"pinned",false)},iscolumnpinned:function(d){return this._getcolumnproperty(d,"pinned")},_setrowdetails:function(j,d,n,h,e){if(n==0){n=100}if(j==null||n==null){return false}if(e!=null){this.details[j]={rowdetails:d,rowdetailsheight:n,rowdetailshidden:h,detailskey:e}}else{var m=this.details[j]!=null?this.details[j].detailskey:null;var l={rowdetails:d,rowdetailsheight:n,rowdetailshidden:h,detailskey:m};var k=this;for(var g=0;g<this.detailboundrows.length;g++){if(this.detailboundrows[g]!=undefined){var f=this.detailboundrows[g];if(f.details.key==m){f.details.rowdetailsheight=l.rowdetailsheight;f.details.rowdetailshidden=l.rowdetailshidden;f.details.rowdetails=l.rowdetails;break}}}this.details[j]=l}this.rendergridcontent(true);return true},getrowdetails:function(d){if(d==null){return false}d=this.getrowvisibleindex(d);return this._getrowdetails(d)},_getrowdetails:function(d){if(d==null){return false}if(d<0){return false}if(this.details[d]){return this.details[d]}if(this.rowdetailstemplate){return this.rowdetailstemplate}},getrecordscount:function(){return this.dataview.totalrecords},showrowdetails:function(d){if(this._loading){alert(this.loadingerrormessage);return false}if(d==null){return false}d=this.getrowvisibleindex(d);if(d<0){return false}var e=this._getrowdetails(d);return this._setrowdetailsvisibility(d,e,false)},hiderowdetails:function(d){if(this._loading){alert(this.loadingerrormessage);return false}d=this.getrowvisibleindex(d);if(d<0){return false}var e=this._getrowdetails(d);return this._setrowdetailsvisibility(d,e,true)},_togglerowdetails:function(g){var d=g.visibleindex;var e=this._getrowdetails(d);if(e!=null){var f=!e.rowdetailshidden;return this._setrowdetailsvisibility(d,e,f)}return false},_setrowdetailsvisibility:function(e,f,h){if(this.rowdetailstemplate){if(!this.details){this.details=new Array()}if(!this.details[e]){this.details[e]={rowdetailshidden:this.rowdetailstemplate.rowdetailshidden,rowdetailsheight:this.rowdetailstemplate.rowdetailsheight,rowdetails:this.rowdetailstemplate.rowdetails};var g=this.dataview.generatekey();this.details[e].detailskey=g;this.detailboundrows[e]={index:e,details:this.details[e]}}}if(f!=null){this.details[e].rowdetailshidden=h}else{return false}var d=this.details[e];if(h){this._raiseEvent(21,{rowindex:e,details:d.rowdetails,height:d.rowdetailsheight})}else{this._raiseEvent(20,{rowindex:e,details:d.rowdetails,height:d.rowdetailsheight})}return this._setrowdetails(e,d.rowdetails,d.rowdetailsheight,d.rowdetailshidden)},getrowvisibleindex:function(d){if(d==undefined||d==null||d<0){return false}if(this.virtualmode){var e=this.dataview.loadedrecords[d];if(e==undefined){return -1}return e.visibleindex}var e=this.dataview.bounditems[d];if(e==undefined){return -1}return e.visibleindex},hiderow:function(d){if(this._loading){alert(this.loadingerrormessage);return false}if(d==undefined||d==null||d<0){return false}if(d==null){return false}this.hiddenboundrows[d]={index:d,hidden:true};d=this.getrowvisibleindex(d);return this._setrowvisibility(d,true)},showrow:function(d){if(this._loading){alert(this.loadingerrormessage);return false}if(d==undefined||d==null||d<0){return false}if(d==null){return false}this.hiddenboundrows[d]={index:d,hidden:false};d=this.getrowvisibleindex(d);return this._setrowvisibility(d,false)},isrowhiddenat:function(d){if(d==null){return null}d=this.getrowvisibleindex(d);if(this.rows.records[d]){return this.rows.records[d].hidden}},_setrowvisibility:function(d,f,e){if(d==null){return false}this.hiddens[d]=f;if(e==undefined||e){this.rendergridcontent(true);return true}return false},_loadrows:function(){if(!this._pageviews[this.dataview.pagenum]&&!this.pageable){return}var p=!this.pageable?this._pageviews[this.dataview.pagenum].top:0;if(!this.pageable&&this._pagescache[this.dataview.pagenum]!=undefined){return null}if(!this.virtualsizeinfo){return}var t=this;var l=new Array();var q=new Array();var e=t.groupable&&t.groups.length>0;var j=this.dataview.totalrecords;var o=this.virtualsizeinfo.virtualheight;var s=0;this.rows.beginupdate();var f=this.dataview.pagesize;if(this.pageable&&e){f=this.dataview.rows.length}for(var g=0;g<f;g++){if(g>=this.dataview.rows.length){break}var k=this.dataview.rows[g];var u=null;if(!t.rows.records[k.visibleindex]){u=new a(t,k)}else{u=t.rows.records[k.visibleindex];u.setdata(k)}u.hidden=this.hiddens[u.visibleindex];if(this.rowdetailstemplate){u.rowdetails=this.rowdetailstemplate.rowdetails;u.rowdetailsheight=this.rowdetailstemplate.rowdetailsheight;u.rowdetailshidden=this.rowdetailstemplate.rowdetailshidden}var d=this.details[u.visibleindex];if(d){u.rowdetails=d.rowdetails;u.rowdetailsheight=d.rowdetailsheight;u.rowdetailshidden=d.rowdetailshidden}else{if(!this.rowdetailstemplate){u.rowdetails=null}}if(e&&this.pageable&&u.parentbounddata!=null){var r=l[u.parentbounddata.uniqueid];if(r!=null){var n=this._findgroupstate(r.uniqueid);if(this._setsubgroupsvisibility){this._setsubgroupsvisibility(this,u.parentbounddata,!n,false)}u.hidden=this.hiddens[u.visibleindex]}if(r!=null&&r!=undefined){u.parentrow=r;r.subrows[r.subrows.length++]=u}}if(u.hidden){continue}var h=k.visibleindex;if(!this.heights[h]){this.heights[h]=this.rowsheight}u.height=this.heights[h];if(this.rowdetails){if(u.rowdetails&&!u.rowdetailshidden){u.height+=u.rowdetailsheight}}l[u.uniqueid]=u;q[s++]=u;u.top=p;p+=u.height;var m=h;t.rows.replace(m,u)}if(this.autoheight&&this.autorowheight){this._pageviews[0].height=p}this.rows.resumeupdate();if(q.length>0){this._pagescache[this.dataview.pagenum]=q}},_gettableheight:function(){if(this.tableheight!=undefined){return this.tableheight}var e=this.host.height();if(this.columnsheader){var d=this.columnsheader.outerHeight();if(!this.showheader){d=0}}e-=d;if(this.hScrollBar[0].style.visibility=="visible"){e-=this.hScrollBar.outerHeight()}if(this.pageable){e-=this.pager.outerHeight()}if(this._groupsheader()){e-=this.groupsheader.outerHeight()}if(this.showtoolbar){e-=this.toolbarheight}if(this.showstatusbar){e-=this.statusbarheight}if(e>0){this.tableheight=e;return e}return this.host.height()},_getpagesize:function(){if(this.pageable){return this.pagesize}if(this.virtualmode){var e=Math.round(this.host.height())+2*this.rowsheight;var d=Math.round(e/this.rowsheight);return d}if(this.autoheight||this.autorowheight){if(this.dataview.totalrows==0){return 1}return this.dataview.totalrows}if(this.dataview.totalrows<100&&this.dataview.totalrecords<100&&this.dataview.totalrows>0){return this.dataview.totalrows}return 100},_calculatevirtualheight:function(){var n=this;var e=Math.round(this.host.height())+2*this.rowsheight;realheight=this._gettableheight();var p=Math.round(e/this.rowsheight);this.heights=new Array();this.hiddens=new Array();this.details=new Array();this.expandedgroups=new Array();this.hiddenboundrows=new Array();this.heightboundrows=new Array();this.detailboundrows=new Array();var h=Math.max(this.dataview.totalrows,this.dataview.totalrecords);if(this.pageable){h=this.pagesize;if(this.pagesize>Math.max(this.dataview.totalrows,this.dataview.totalrecords)&&this.autoheight){h=Math.max(this.dataview.totalrows,this.dataview.totalrecords)}}var l=h*this.rowsheight;var m=0;var j=0;var k=0;var f=this._getpagesize();var d=f*this.rowsheight;var g=0;if(h+f>0){while(g<=h+f){m+=d;if(g-f<h&&g>=h){var o=g-h;if(o>0){k-=d;this._pageviews[j-1]={top:k,height:d-o*this.rowsheight}}break}else{this._pageviews[j++]={top:k,height:d}}k=m;g+=f}}this.vScrollBar.jqxScrollBar({value:0});if(l>realheight&&!this.autoheight){this.vScrollBar.css("visibility","visible");this.vScrollBar.jqxScrollBar({max:l-realheight})}else{this.vScrollBar.css("visibility","hidden")}this.dataview.pagesize=f;this.dataview.updateview();return{visiblerecords:p,virtualheight:l}},_updatepageviews:function(){if(this.updating()){return}this._pagescache=new Array();this._pageviews=new Array();this.tableheight=null;var t=this;var d=Math.round(this.host.height())+2*this.rowsheight;var u=Math.round(d/this.rowsheight);var m=Math.max(this.dataview.totalrows,this.dataview.totalrecords);var p=m*this.rowsheight;var s=0;var f=0;var n=0;var o=0;var h=0;var g=this._getpagesize();if(!this.pageable){for(var l=0;l<m;l++){var r={index:l,height:this.heights[l],hidden:this.hiddens[l],details:this.details[l]};if(this.heights[l]==undefined){this.heights[l]=this.rowsheight;r.height=this.rowsheight}if(this.hiddens[l]==undefined){this.hiddens[l]=false;r.hidden=false}if(this.details[l]==undefined){this.details[l]=null}if(r.height!=t.rowsheight){p-=t.rowsheight;p+=r.height}if(r.hidden){p-=r.height}else{f+=r.height;var j=0;if(this.rowdetails){if(this.rowdetailstemplate){if(!r.details){r.details=this.rowdetailstemplate}}if(r.details&&r.details.rowdetails&&!r.details.rowdetailshidden){j=r.details.rowdetailsheight;f+=j;p+=j}}s+=r.height+j}h++;if(h>=g||l==m-1){this._pageviews[n++]={top:o,height:f};f=0;o=s;h=0}}}else{if(this._updatepagedview){p=this._updatepagedview(m,p,0)}if(this.autoheight){this._arrange()}}var e=this._gettableheight();if(p>e){if(this.pageable&&this.gotopage){p=this._pageviews[0].height;if(p<0){p=this._pageviews[0].height}}if(this.vScrollBar.css("visibility")!="visible"){this.vScrollBar.css("visibility","visible")}if(p<=e||this.autoheight){this.vScrollBar.css("visibility","hidden")}if(p-e>0){var q=p-e;this.vScrollBar.jqxScrollBar({max:q})}else{this.vScrollBar.jqxScrollBar({value:0,max:p})}}else{if(!this._loading){this.vScrollBar.css("visibility","hidden")}this.vScrollBar.jqxScrollBar({value:0})}this._arrange();if(this.autoheight){u=Math.round(this.host.height()/this.rowsheight)}this.virtualsizeinfo={visiblerecords:u,virtualheight:p}},updatebounddata:function(d){this.databind(this.source,d)},refreshdata:function(){this._refreshdataview();this.render()},_updatevscrollbarmax:function(){if(this._pageviews&&this._pageviews.length>0){var f=this._pageviews[0].height;var e=this._gettableheight();if(f>e){if(this.pageable&&this.gotopage){f=this._pageviews[0].height;if(f<0){f=this._pageviews[0].height}}if(this.vScrollBar.css("visibility")!="visible"){this.vScrollBar.css("visibility","visible")}if(f<=e||this.autoheight){this.vScrollBar.css("visibility","hidden")}if(f-e>0){var d=f-e;this.vScrollBar.jqxScrollBar({max:d})}else{this.vScrollBar.jqxScrollBar({value:0,max:f})}}else{this.vScrollBar.css("visibility","hidden");this.vScrollBar.jqxScrollBar({value:0})}}},_refreshdataview:function(){this.dataview.refresh()},refresh:function(d){if(d!=true){if(this.virtualsizeinfo!=null){this._cellscache=new Array();this._renderrows(this.virtualsizeinfo);this._updatesize()}}},render:function(){this._render(true,true,true,true)},clear:function(){this.databind(null);this.render()},_render:function(g,h,f,d){if(this.dataview==null){return}if(this.editcell!=null&&this.endcelledit){this.endcelledit(this.editcell.row,this.editcell.column,true,false)}this.validationpopup=null;this._removeHandlers();this._addHandlers();this._initializeRows();this._requiresupdate=h!=undefined?h:true;if(f){if(!this._requiresupdate){if(d!=false){this._initmenu()}}if(this.columns==null){this.columns=new b.jqx.collection(this.element)}else{this._initializeColumns()}}this.tableheight=null;this._pagescache=new Array();this._pageviews=new Array();this.visiblerows=new Array();this.hittestinfo=new Array();if(this._requiresupdate){this._clearcaches();if(d!=false){this._initmenu()}}this.virtualsizeinfo=null;this.prerenderrequired=true;if((this.groupable&&this.groups.length>0&&this.rowdetails)||(this.rowdetails)){if(this.gridcontent){this._rowdetailscache=new Array();this._rowdetailselementscache=new Array();this.detailboundrows=new Array();this.details=new Array();this.gridcontent.html("");this.gridcontent=null}}if(f){if(this.filterrow){this.filterrow.detach()}this.content.html("");this.columnsheader=this.columnsheader||b('<div style="overflow: hidden;"></div>');this.columnsheader.remove();this.columnsheader.addClass(this.toTP("jqx-widget-header"));this.columnsheader.addClass(this.toTP("jqx-grid-header"))}else{if(this.gridcontent){this.gridcontent.html("")}}if(!this.showheader){this.columnsheader.css("display","none")}else{if(this.columnsheader){this.columnsheader.css("display","block")}}this.gridcontent=this.gridcontent||b('<div style="width: 100%; overflow: hidden; position: absolute;"></div>');this.gridcontent.remove();if(this.showfilterrow&&this.filterable){this.columnsheader.height(this.columnsheight+this.filterrowheight)}else{this.columnsheader.height(this.columnsheight)}this.content.append(this.columnsheader);this.content.append(this.gridcontent);this._arrange();if(this._initgroupsheader){this._initgroupsheader()}this.selectionarea=this.selectionarea||b("<div style='z-index: 99999; visibility: hidden; position: absolute;'></div>");this.selectionarea.addClass(this.toThemeProperty("jqx-grid-selectionarea"));this.selectionarea.addClass(this.toThemeProperty("jqx-fill-state-pressed"));this.content.append(this.selectionarea);this.tableheight=null;this.rendergridcontent(false,f);if(this.groups.length>0&&this.groupable){this.suspendgroupevents=true;if(this.collapseallgroups){if(!this.groupsexpandedbydefault){this.collapseallgroups(false);this._updatescrollbarsafterrowsprerender()}else{this.expandallgroups(false)}}this.suspendgroupevents=false}if(this.pageable&&this.updatepagerdetails){this.updatepagerdetails();if(this.autoheight){this._updatepageviews();if(this.autorowheight){this._renderrows(this.virtualsizeinfo)}}}this._updateTouchScrolling();if(this.showaggregates&&this._updateaggregates){this._updateaggregates()}var e=b.jqx.utilities.getBrowser();if(e.browser=="msie"&&parseInt(e.version)<9){this._overlayElement=b("<div style='visibility: hidden; position: absolute; width: 100%; height: 100%;'></div>");this.content.prepend(this._overlayElement);this._overlayElement.css("background","white");this._overlayElement.css("z-index",9999999);this._overlayElement.css("opacity",0.0001)}if(this.rendered){this.rendered("full")}},rendergridcontent:function(d,f){if(this.updating()){return false}if(d==undefined||d==null){d=false}this._requiresupdate=d;var h=this.prerenderrequired;if(this.prerenderrequired){this._arrange()}var g=this;var f=f;if(f==null||f==undefined){f=true}this.tableheight=null;g.virtualsizeinfo=g.virtualsizeinfo||g._calculatevirtualheight();if(g.pageable&&!g.autoheight){if(g.dataview.totalrows<g.pagesize){g._requiresupdate=true}}if(f){g._rendercolumnheaders()}else{if(this._rendersortcolumn){this._rendersortcolumn()}if(this._renderfiltercolumn){this._renderfiltercolumn()}}g._renderrows(g.virtualsizeinfo);if(this.gridcontent[0].scrollTop!=0){this.gridcontent[0].scrollTop=0}if(this.gridcontent[0].scrollLeft!=0){this.gridcontent[0].scrollLeft=0}if(h){var e=this.tableheight;this._arrange();if(e!=this.tableheight&&this.autoheight){g._renderrows(g.virtualsizeinfo)}}if(this.autosavestate){if(this.initializedcall!=null){if(this.savestate){this.savestate()}}}return true},_updatecolumnwidths:function(){var j=this.host.width();var d=j;var i="";if(this.columns==undefined||this.columns.records==undefined){return}var l=this;b.each(this.columns.records,function(m,n){if(!(this.hidden&&this.hideable)){if(this.width.toString().indexOf("%")!=-1||this._percentagewidth!=undefined){var n=0;var o=l.vScrollBar[0].style.visibility=="hidden"?0:l.scrollbarsize+5;n=parseInt(this.width)*d/100;if(this._percentagewidth!=undefined){n=parseInt(this._percentagewidth)*(d-o)/100}if(n<this.minwidth&&this.minwidth!="auto"){n=this.minwidth}if(n>this.maxwidth&&this.maxwidth!="auto"){n=this.maxwidth}j-=Math.round(n)}else{if(this.width!="auto"&&!this._width){j-=this.width}else{i+=this.text}}}});var e=this._gettableheight();if(!this.autoheight){if(this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>e){if(this.groupable&&this.groups.length>0){if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){var k=this.dataview.loadedrootgroups.length*this.rowsheight;if(k>e){j-=this.scrollbarsize+5;d-=this.scrollbarsize+5}else{if(this.vScrollBar.css("visibility")=="visible"){j-=this.scrollbarsize+5;d-=this.scrollbarsize+5}}}else{j-=this.scrollbarsize+5;d-=this.scrollbarsize+5}}else{j-=this.scrollbarsize+5;d-=this.scrollbarsize+5}}}var g=this.columnsheader.find("#columntable"+this.element.id);if(g.length==0){return}var h=g.find(".jqx-grid-column-header");var f=0;b.each(this.columns.records,function(n,r){var p=b(h[n]);var m=false;var q=this.width;if(this.width.toString().indexOf("%")!=-1||this._percentagewidth!=undefined){if(this._percentagewidth!=undefined){q=parseInt(this._percentagewidth)*d/100}else{q=parseInt(this.width)*d/100}m=true}if(this.width!="auto"&&!this._width&&!m){if(parseInt(p[0].style.width)!=this.width){p.width(this.width)}}else{if(m){if(q<this.minwidth&&this.minwidth!="auto"){q=this.minwidth;this.width=q}if(q>this.maxwidth&&this.maxwidth!="auto"){q=this.maxwidth;this.width=q}if(parseInt(p[0].style.width)!=q){p.width(q);this.width=q}}else{var o=Math.round(j*(this.text.length/i.length));if(isNaN(o)){o=this.minwidth}if(o<0){$element=b("<span>"+this.text+"</span>");b(document.body).append($element);o=10+$element.width();$element.remove()}if(o<this.minwidth){o=this.minwidth}if(o>this.maxwidth){o=this.maxwidth}this._width="auto";this.width=o;p.width(this.width)}}if(parseInt(p[0].style.left)!=f){p.css("left",f)}if(!(this.hidden&&this.hideable)){f+=this.width}this._requirewidthupdate=true});this.columnsheader.width(2+f);g.width(this.columnsheader.width());if(this.showfilterrow&&this.filterrow){this.filterrow.width(this.columnsheader.width());this._updatefilterrowui()}},_rendercolumnheaders:function(){var w=this;if(!this.prerenderrequired){if(this._rendersortcolumn){this._rendersortcolumn()}if(this._renderfiltercolumn){this._renderfiltercolumn()}if(this.showfilterrow&&this.filterrow){this.filterrow.width(this.columnsheader.width());this._updatefilterrowui()}return}this._columnsbydatafield=new Array();this.columnsheader.find("#columntable"+this.element.id).remove();var g=b('<div id="columntable'+this.element.id+'" style="height: 100%; position: relative;"></div>');g[0].cells=new Array();var l=0;var h=0;var p="";var r=this.host.width();var e=r;var v=new Array();var q=new Array();b.each(this.columns.records,function(j,k){if(!(this.hidden&&this.hideable)){if(this.width!="auto"&&!this._width){if(this.width<this.minwidth&&this.minwidth!="auto"){r-=this.minwidth}else{if(this.width>this.maxwidth&&this.maxwidth!="auto"){r-=this.maxwidth}else{if(this.width.toString().indexOf("%")!=-1){var k=0;k=parseInt(this.width)*e/100;if(k<this.minwidth&&this.minwidth!="auto"){k=this.minwidth}if(k>this.maxwidth&&this.maxwidth!="auto"){k=this.maxwidth}r-=k}else{if(typeof this.width=="string"){this.width=parseInt(this.width)}r-=this.width}}}}else{p+=this.text}}if(this.pinned){v[v.length]=this}else{q[q.length]=this}});for(var o=0;o<v.length;o++){this.columns.replace(o,v[o])}for(var m=0;m<q.length;m++){this.columns.replace(v.length+m,q[m])}var u=this.headerZIndex;var d=w.groupable?w.groups.length:0;if(this.rowdetails&&this.showrowdetailscolumn){d++}var n=w.columnsheader.height();if(this.showfilterrow){n=this.columnsheight}var f=this._gettableheight();if(this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>f){if(this.groupable&&this.groups.length>0){if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){var s=this.dataview.loadedrootgroups.length*this.rowsheight;if(s>f){r-=this.scrollbarsize+5;e-=this.scrollbarsize+5}}else{r-=this.scrollbarsize+5;e-=this.scrollbarsize+5}}else{if(!this.autoheight){r-=this.scrollbarsize+5;e-=this.scrollbarsize+5}}}b.each(this.columns.records,function(N,K){var P=w.toTP("jqx-grid-column-header")+" "+w.toTP("jqx-widget-header");var y=b('<div style="position: absolute; height: 100%;" class="'+P+'"></div>');this.uielement=y;if(this.classname!=""&&this.classname){y.addClass(this.classname)}y.css("z-index",u--);var F=this.width;var H=false;if(this.width.toString().indexOf("%")!=-1||this._percentagewidth!=undefined){if(this._percentagewidth!=undefined){F=parseInt(this._percentagewidth)*e/100}else{F=parseInt(this.width)*e/100}H=true}if(this.width!="auto"&&!this._width&&!H){if(F<this.minwidth&&this.minwidth!="auto"){F=this.minwidth}if(F>this.maxwidth&&this.maxwidth!="auto"){F=this.maxwidth}y.width(F)}else{if(H){if(F<this.minwidth&&this.minwidth!="auto"){F=this.minwidth}if(F>this.maxwidth&&this.maxwidth!="auto"){F=this.maxwidth}this._percentagewidth=this.width;y.width(F);this.width=F}else{var J=Math.round(r*(this.text.length/p.length));if(isNaN(J)){J=this.minwidth}if(J<0){$element=b("<span>"+this.text+"</span>");b(document.body).append($element);J=10+$element.width();$element.remove()}if(J<this.minwidth){J=this.minwidth}if(J>this.maxwidth){J=this.maxwidth}this._width="auto";this.width=J;F=this.width;y.width(this.width)}}if(this.hidden&&this.hideable){y.css("display","none")}var k=b('<div style="height: 100%; width: 100%;"></div>');var B=b('<div style="display: none; left: 100%; top: 0%; position: absolute;"></div>');var E=b('<div style="width: 100%; height:100%;"></div>');E.addClass(w.toTP("jqx-grid-column-menubutton"));E.appendTo(B);B.height(n);if(!w.enableanimations){B.css("margin-left",-16)}var G=b('<div class="sortasc" style="float: right; display: none; width: 16px;"><div style="width: 100%; height:100%;"></div></div>');var I=b('<div class="sortdesc" style="float: right; display: none; width: 16px;"><div style="width: 100%; height:100%;"></div></div>');var M=b('<div class="filtericon" style="float: right; display: none; width: 16px;"><div style="width: 100%; height:100%;"></div></div>');if(!w.autoshowfiltericon&&this.filterable){M.css("display","block")}G.height(n);I.height(n);M.height(n);G.find("div").addClass(w.toTP("jqx-grid-column-sortascbutton"));I.find("div").addClass(w.toTP("jqx-grid-column-sortdescbutton"));M.find("div").addClass(w.toTP("jqx-grid-column-filterbutton"));this.sortasc=G[0];this.sortdesc=I[0];this.filtericon=M[0];this.columnsmenu=B[0];g[0].cells[N]=y[0];B.width(w.columnsmenuwidth);var A=w.columnsmenu;var x=false;var L=false;if((w.groupable&&d>0&&l<d)||(w.rowdetails&&l<d)){l++;A&=false;this.sortable=false;this.editable=false;L=true}else{var C=this.renderer!=null?this.renderer(this.text,this.align):w._rendercolumnheader(this.text,this.align);if(C==null){C=w._rendercolumnheader(this.text,this.align)}if(this.renderer!=null){C=b(C)}A&=true;x=true}k.append(C);if(C!=null){var D=b('<div class="iconscontainer" style="margin-left: -32px; display: block; position: absolute; left: 100%; top: 0%; width: 32px;"></div>');B.addClass(w.toTP("jqx-widget-header"));D.height(n);k.append(D);D.append(M);D.append(G);D.append(I);I.addClass(w.toTP("jqx-widget-header"));G.addClass(w.toTP("jqx-widget-header"));M.addClass(w.toTP("jqx-widget-header"));this.iconscontainer=D}if(A){w._handlecolumnsmenu(w,k,y,B,this);if(!this.menu){B.hide()}}y.append(k);g.append(y);if(w.groupable&&x){y[0].id=w.dataview.generatekey();if(w._handlecolumnstogroupsdragdrop){w._handlecolumnstogroupsdragdrop(this,y)}else{alert("jqxgrid.grouping.js is not loaded")}}if(w.columnsreorder&&this.draggable){w._handlecolumnsdragreorder(this,y)}var O=this;w.addHandler(y,"click",function(i){if(w.sorttogglestates>0&&w._togglesort){w._togglesort(O)}i.preventDefault();w._raiseEvent(7,{column:O.getcolumnproperties(),datafield:O.datafield,originalEvent:i})});if(O.resizable&&w.columnsresize&&!L){var z=false;var j="mousemove";if(w.isTouchDevice()){z=true;j="touchstart"}w.addHandler(y,j,function(Q){var i=parseInt(Q.pageX);var S=5;var U=parseInt(y.offset().left);if(w.hasTransform){U=b.jqx.utilities.getOffset(y).left}if(w._handlecolumnsresize){if(z){var R=w.getTouches(Q);var T=R[0];i=T.pageX;S=40;if(i>=U+O.width-S){w.resizablecolumn={columnelement:y,column:O};y.css("cursor","col-resize")}else{y.css("cursor","");w.resizablecolumn=null}return true}if(i>=U+O.width-S){if(i<=U+O.width+S){w.resizablecolumn={columnelement:y,column:O};y.css("cursor","col-resize");return false}}else{y.css("cursor","");w.resizablecolumn=null}}})}y.css("left",h);if(!(this.hidden&&this.hideable)){h+=F}if(O.rendered){O.rendered(C);if(D!=null){D.hide()}}});if(h>0){this.columnsheader.width(2+h)}else{this.columnsheader.width(h)}this.columnsrow=g;w.columnsheader.append(g);if(this.showfilterrow&&this._updatefilterrow){g.height(this.columnsheight);if(!this.filterrow){var t=b("<div></div>");t[0].id="filterrow."+this.element.id;t.height(this.filterrowheight);this.filterrow=t}this.columnsheader.append(this.filterrow);this._updatefilterrow()}g.width(h);if(this._handlecolumnsdragdrop){this._handlecolumnsdragdrop()}if(this._handlecolumnsreorder){this._handlecolumnsreorder()}if(this._rendersortcolumn){this._rendersortcolumn()}if(this._renderfiltercolumn){this._renderfiltercolumn()}if(this._handlecolumnsresize){this._handlecolumnsresize()}},_handlecolumnsmenu:function(n,e,f,h,k){n.dragmousedown=null;h[0].id=n.dataview.generatekey();e.append(h);f[0].columnsmenu=h[0];k.element=f[0];var j=16;var m=function(){if(!k.menu){return false}if(!n.resizing){if(n.menuitemsarray.length>0){if(!n.enableanimations){h.css("display","block");k.iconscontainer.css("margin-left","-48px")}else{h.css("display","block");h.stop();k.iconscontainer.stop();h.css("margin-left","0px");h.animate({"margin-left":-j},"fast",function(){h.css("display","block")});k.iconscontainer.animate({"margin-left":-48},"fast")}}}};n.addHandler(f,"mouseenter",function(o){if(k.menu&&n.autoshowcolumnsmenubutton){m()}});if(!n.autoshowcolumnsmenubutton){h.css("display","block");k.iconscontainer.css("margin-left","-48px");h.css({"margin-left":-j})}n.addHandler(f,"mouseleave",function(o){if(n.menuitemsarray.length>0&&k.menu){var p=b.data(document.body,"contextmenu"+n.element.id);if(p!=undefined&&h[0].id==p.columnsmenu.id){return}if(n.autoshowcolumnsmenubutton){if(!n.enableanimations){h.css("display","none");k.iconscontainer.css("margin-left","-32px")}else{h.css("margin-left",-j);h.stop();k.iconscontainer.stop();h.animate({"margin-left":0},"fast",function(){h.css("display","none")});k.iconscontainer.animate({"margin-left":-32},"fast")}}}});var i=true;var d="";var g=b(k.filtericon);n.addHandler(h,"mousedown",function(o){i=!b.data(n.gridmenu[0],"contextMenuOpened"+n.gridmenu[0].id);d=b.data(document.body,"contextmenu"+n.element.id);if(d!=null){d=d.column.datafield}});n.addHandler(g,"mousedown",function(o){i=!b.data(n.gridmenu[0],"contextMenuOpened"+n.gridmenu[0].id);d=b.data(document.body,"contextmenu"+n.element.id);if(d!=null){d=d.column.datafield}});var l=function(){if(!k.menu){return false}var r=h.offset();var x=h.height();if(!i){i=true;if(d==k.datafield){n._closemenu();return false}}var u=n.host.offset();if(n.hasTransform){u=b.jqx.utilities.getOffset(n.host);r=b.jqx.utilities.getOffset(h)}if(u.left+n.host.width()>parseInt(r.left)+n.gridmenu.width()){n.gridmenu.jqxMenu("open",r.left,r.top+x)}else{n.gridmenu.jqxMenu("open",h.width()+r.left-n.gridmenu.width(),r.top+x)}if(n.gridmenu.width()<100){n._arrangemenu()}n._hasOpenedMenu=true;var v=n._getmenuitembyindex(0);var o=n._getmenuitembyindex(1);var z=n._getmenuitembyindex(2);var w=n._getmenuitembyindex(3);var p=n._getmenuitembyindex(4);var A=n._getmenuitembyindex(5);if(v!=null&&o!=null&&z!=null){var s=k.sortable&&n.sortable;n.gridmenu.jqxMenu("disable",v.id,!s);n.gridmenu.jqxMenu("disable",o.id,!s);n.gridmenu.jqxMenu("disable",z.id,!s);if(k.datafield){if(n.sortcolumn==k.datafield){var t=n.getsortinformation();if(s){if(t.sortdirection.ascending){n.gridmenu.jqxMenu("disable",v.id,true)}else{n.gridmenu.jqxMenu("disable",o.id,true)}}}else{n.gridmenu.jqxMenu("disable",z.id,true)}}}if(w!=null&&p!=null){if(!n.groupable||!k.groupable){n.gridmenu.jqxMenu("disable",p.id,true);n.gridmenu.jqxMenu("disable",w.id,true)}else{if(n.groups&&n.groups.indexOf(k.datafield)!=-1){n.gridmenu.jqxMenu("disable",w.id,true);n.gridmenu.jqxMenu("disable",p.id,false)}else{n.gridmenu.jqxMenu("disable",w.id,false);n.gridmenu.jqxMenu("disable",p.id,true)}}}if(A!=null){n._updatefilterpanel(n,A,k);var q=0;if(n.sortable&&n._togglesort&&n.showsortmenuitems){q+=3}if(n.groupable&&n.addgroup&&n.showgroupmenuitems){q+=2}var y=q*27+3;if(b.browser.msie&&b.browser.version<8){y+=20;b(A).height(190)}if(n.filterable&&n.showfiltermenuitems){if(!k.filterable){n.gridmenu.height(y);b(A).css("display","none")}else{n.gridmenu.height(y+176);b(A).css("display","block")}}}b.data(document.body,"contextmenu"+n.element.id,{column:k,columnsmenu:h[0]})};n.addHandler(g,"click",function(o){if(!k.menu){return false}if(!n.showfilterrow){m();l()}return false});n.addHandler(h,"click",function(o){if(!k.menu){return false}l();return false})},_removecolumnhandlers:function(h){var e=this;var f=b(h.element);if(f.length>0){e.removeHandler(f,"mouseenter");e.removeHandler(f,"mouseleave");var g=b(h.filtericon);e.removeHandler(g,"mousedown");e.removeHandler(g,"click");e.removeHandler(f,"click");if(f[0].columnsmenu){var d=b(f[0].columnsmenu);e.removeHandler(d,"click");e.removeHandler(d,"mousedown")}}},_rendercolumnheader:function(e,f){if(this.enableellipsis){if(f=="center"){return b('<div style="overflow: hidden; text-overflow: ellipsis; text-align: center;"><a href="#">'+e+"</a></div>")}var d=b('<a style="overflow: hidden; text-overflow: ellipsis; text-align: '+f+';" href="#">'+e+"</a>");return d}if(f=="center"){return b('<div style="text-align: center; margin-top: 5px;"><a href="#">'+e+"</a></div>")}var d=b('<a style="float: '+f+';" href="#">'+e+"</a>");return d},_renderrows:function(d){var g=this;if((this.pageable||this.groupable)&&this.autoheight){if(this.table!=null&&this.table[0].rows!=null&&this.table[0].rows.length<this.dataview.rows.length){g.prerenderrequired=true}}if(!this.pageable&&this.autoheight&&(this.virtualmode||this.unboundmode)){var i=this.source.totalrecords;if(!isNaN(i)){if(this.table!=null&&this.table[0].rows!=null&&this.table[0].rows.length!=i){g.prerenderrequired=true}}}g._prerenderrows(d);if(g._requiresupdate){g._requiresupdate=false;g._updatepageviews()}var f=function(){if(g._loading){return}if(g.WinJS){MSApp.execUnsafeLocalFunction(function(){g._rendervisualrows()})}else{g._rendervisualrows()}};if(this.virtualmode){var h=function(){if(g.rendergridrows){var m=g._startboundindex;if(m==undefined){m=0}var k=m+1+g.dataview.pagesize;if(m!=null&&k!=null){var l=g.source._source?true:false;var n=!l?g.source.recordstartindex:g.source._source.recordstartindex;if(n!=m){if(!l){g.source.recordstartindex=m;g.source.recordendindex=k}else{g.source._source.recordstartindex=m;g.source._source.recordendindex=k}g.updatebounddata()}}}};if(this.loadondemand){h();this.loadondemand=false}var e=this._browser==undefined?this._isIE10():this._browser;if(this.editable&&this.editcell&&!this.vScrollInstance.isScrolling()&&!this.hScrollInstance.isScrolling()){f()}else{if(e||b.browser.mozilla||(navigator&&navigator.userAgent.indexOf("Safari")!=-1)){if(this._scrolltimer!=null){clearTimeout(this._scrolltimer)}this._scrolltimer=setTimeout(function(){f()},5)}else{f()}}}else{if(navigator&&navigator.userAgent.indexOf("Chrome")==-1&&navigator.userAgent.indexOf("Safari")!=-1){this.updatedelay=1}var e=this._browser==undefined?this._isIE10():this._browser;if(e){this.updatedelay=5}if(b.browser.mozilla&&this.updatedelay==0&&(this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling())){j=setTimeout(function(){f()},0.01);return}if(this.updatedelay==0){f()}else{var j=b.data(document.body,"Grid"+this.element.id);if(j!=null){clearTimeout(j)}if(this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling()){j=setTimeout(function(){f()},this.updatedelay);b.data(document.body,"Grid"+this.element.id,j)}else{b.data(document.body,"Grid"+this.element.id,null);f()}}}},_renderhorizontalscroll:function(){var k=this.hScrollInstance;var n=k.value;var f=parseInt(n);if(this.table==null){return}var t=this.table[0].rows.length;var s=this.columnsrow;var m=this.groupable&&this.groups.length>0?this.groups.length:0;var r=this.columns.records.length-m;var h=this.columns.records;var q=this.dataview.rows.length==0;if(q){for(var l=0;l<m+r;l++){var g=h[l];if(!g.pinned){var p=s[0].cells[l];p.style.marginLeft=-f+"px"}}}else{for(var o=0;o<t;o++){var d=this.table[0].rows[o];for(var l=0;l<m+r;l++){var e=d.cells[l];if(e!=undefined){var g=h[l];if(!g.pinned){e.style.marginLeft=-f+"px";if(o==0){var p=s[0].cells[l];p.style.marginLeft=-f+"px"}}}}}}if(this.showaggregates){if(this.statusbar[0].cells){for(var l=0;l<m+r;l++){var e=this.statusbar[0].cells[l];if(e!=undefined){var g=h[l];if(!g.pinned){e.style.marginLeft=-f+"px";if(o==0){var p=s[0].cells[l];p.style.marginLeft=-f+"px"}}}}}}if(this.showfilterrow&&this.filterrow){if(this.filterrow[0].cells){for(var l=0;l<m+r;l++){var e=this.filterrow[0].cells[l];if(e!=undefined){var g=h[l];if(!g.pinned){e.style.marginLeft=-f+"px";if(o==0){var p=s[0].cells[l];p.style.marginLeft=-f+"px"}}}}}}if(this.editcell&&!this.editrow){if(this._showcelleditor&&this.editcell.editing){this._showcelleditor(this.editcell.row,this.getcolumn(this.editcell.column),this.editcell.element,this.editcell.init)}}},_updaterowdetailsvisibility:function(){if(this.rowdetails){for(var d=0;d<this._rowdetailselementscache.length;d++){b(this._rowdetailselementscache[d]).css("display","none")}}},_getvisualcolumnsindexes:function(e,m,i,l,d){if(this.rowdetails){return{start:0,end:i+l}}var f=0;var k=-1;var g=i+l;var n=false;if(!d){for(var h=0;h<i+l;h++){var o=h;if(!n){if(this.columns.records[h].pinned){n=true}}if(!this.columns.records[h].hidden){f+=this.columns.records[h].width}if(f>=e&&k==-1){k=h}if(f>m+e){g=h;break}}}g++;if(g>i+l){g=i+l}if(k==-1||n){k=0}return{start:k,end:g}},_rendervisualrows:function(){if(!this.virtualsizeinfo){return}var M=this.vScrollInstance;var m=this.hScrollInstance;var f=M.value;var w=m.value;var l=parseInt(f);var h=parseInt(w);var t=this._gettableheight();var B=this._hostwidth!=undefined?this._hostwidth:this.host.width();if(this.hScrollBar[0].style.visibility=="visible"){t+=this.rowsheight}var x=this.groupable&&this.groups.length>0;this.visiblerows=new Array();this.hittestinfo=new Array();if(this.editcell&&this.editrow==undefined){this._hidecelleditor()}if(this.editrow!=undefined){this._hideeditors()}if(this.virtualmode&&!this.pageable){this._pagescache=new Array()}if(this._pagescache.length==0){this.dataview.updateview();this._loadrows()}if(this.vScrollBar[0].style.visibility!="visible"){l=0}if(!this.pageable){var D=this._findvisiblerow(l,this._pageviews);if(D==-1){this._clearvisualrows();this._renderemptyrow();this._updaterowdetailsvisibility();return}if(D!=this.dataview.pagenum){this.dataview.pagenum=D;this.dataview.updateview();this._loadrows()}else{if(!this._pagescache[this.dataview.pagenum]){this._loadrows()}}}var W=this.groupable&&this.groups.length>0?this.groups.length:0;var o=this.columns.records.length-W;var P=this._findvisiblerow(l,this._pagescache[this.dataview.pagenum]);var E=this._pagescache[this.dataview.pagenum];var I=P;if(I<0){I=0}var R=0;var O=0;var H=0;var e=0;var J=this.virtualsizeinfo.visiblerecords;var G=this.groupable?this.groups.length:0;var v=this.toTP("jqx-grid-cell");if(x){v=" "+this.toTP("jqx-grid-group-cell")}if(this.isTouchDevice()){v+=" "+this.toTP("jqx-touch")}if(this.autorowheight){v+=" jqx-grid-cell-wrap"}var F=this.rowsheight;var A=I;var V=this._rendercell;var p=true;var n=this._getvisualcolumnsindexes(h,B,W,o,x);var d=n.start;var N=n.end;if(this.autoheight&&this.autorowheight){this._oldpageviewheight=this._pageviews[0].height}if(I>=0){this._updaterowdetailsvisibility();this._startboundindex=E!=null?E[I].bounddata.boundindex:0;for(var k=0;k<J&&O<J;k++){var Q=E!=undefined?E[I+k]:null;if(Q==null){I=-k;if(this._pagescache[this.dataview.pagenum+1]){E=this._pagescache[this.dataview.pagenum+1];this.dataview.pagenum++}else{var q=this._pageviews.length;do{if(this.dataview.pagenum<this._pageviews.length-1){this.dataview.pagenum++;E=undefined;if(this._pageviews[this.dataview.pagenum].height>0){this.dataview.updateview();this._loadrows();E=this._pagescache[this.dataview.pagenum]}}else{E=undefined;break}}while(E==undefined&&this.dataview.pagenum<q)}if(E!=undefined){Q=E[I+k]}}if(Q!=null){if(Q.hidden){continue}this._endboundindex=this._startboundindex+k;if(k==0){var j=Math.abs(l-Q.top);this.table[0].style.top=-j+"px";e=-j}var g=this.table[0].rows[O];if(!g){continue}if(parseInt(g.style.height)!=Q.height){g.style.height=parseInt(Q.height)+"px"}H+=Q.height;var L=this.rowdetails&&Q.rowdetails;var s=!Q.rowdetailshidden;if(L&&s){g.style.height=parseInt(Q.height-Q.rowdetailsheight)+"px";J++}var C=this._isrowselected(p,Q);for(var K=d;K<N;K++){var T=K;this._rendervisualcell(V,v,C,L,s,x,G,g,Q,T,O)}if(this.autorowheight&&this.autoheight){var F=this.rowsheight;for(var K=d;K<N;K++){F=Math.max(F,8+b(g.cells[K].firstChild).height())}g.style.height=parseInt(F)+"px";this.heights[this._startboundindex+k]=F;if(L&&s){F+=Q.rowdetailsheight}Q.height=F}if(Q.group!=undefined&&this._rendergroup){this._rendergroup(G,g,Q,W,o,O)}this.visiblerows[this.visiblerows.length]=Q;this.hittestinfo[this.hittestinfo.length]={row:Q,visualrow:g,details:false};if(L&&s){O++;var g=this.table[0].rows[O];this._renderrowdetails(v,g,Q,W,o,O);this.visiblerows[this.visiblerows.length]=Q;this.hittestinfo[this.hittestinfo.length]={row:Q,visualrow:g,details:true}}if(H+e>=t){break}}else{cansetheight=true;this._clearvisualrow(h,x,O,W,o);if(H+R+e<=t){R+=F}}O++}this._horizontalvalue=h;if(R>0){if(this.vScrollBar[0].style.visibility=="visible"){var U=parseInt(this.table.css("top"));var z=this._pageviews[this._pageviews.length-1];var r=M.max;var y=z.top+z.height-t;if(this.hScrollBar.css("visibility")=="visible"){y+=this.scrollbarsize+20}if(r!=y){if(y>=0){M.max=y;M.setPosition(M.max)}}}}}if(this.autoheight&&this.autorowheight){this._pagescache=new Array();this._loadrows();this.visiblerows=new Array();for(var S=0;S<this._pagescache[this.dataview.pagenum].length;S++){var u=this._pagescache[this.dataview.pagenum][S];this.visiblerows[this.visiblerows.length]=u;var L=this.rowdetails&&u.rowdetails;var s=!u.rowdetailshidden;if(L&&s){this.visiblerows[this.visiblerows.length]=u}}this._arrange()}this._renderemptyrow()},_renderemptyrow:function(){if(this._loading){return}if(this.dataview.records.length==0&&this.showemptyrow){var j=false;if(this.table&&this.table.length>0&&this.table[0].rows&&this.table[0].rows.length>0){var h=this.table[0].rows[0];for(var e=0;e<h.cells.length;e++){var d=b(h.cells[e]);if(d.css("display")!="none"&&!j){j=true;d[0].innerHTML="";var f=b("<span style='white-space: nowrap; float: left; margin-left: 50%; position: relative;'></span>");f.text(this.gridlocalization.emptydatastring);d.append(f);f.css("left",-f.width()/2);f.css("top",this._gettableheight()/2-f.height()/2);var g=Math.abs(parseInt(this.table[0].style.top));if(isNaN(g)){g=0}b(h).height(this._gettableheight()+g);d.css("margin-left","0px");d.width(this.host.width())}d.addClass(this.toThemeProperty("jqx-grid-empty-cell"))}}}},_clearvisualrows:function(){var e=this.virtualsizeinfo.visiblerecords;var f=this.hScrollInstance;var d=f.value;var g=parseInt(d);var i=this.groupable&&this.groups.length>0;for(var h=0;h<e;h++){this._clearvisualrow(g,i,h,0,this.columns.records.length)}},_isrowselected:function(f,e){var d=false;if(f&&e.bounddata!=null){if(this.selectionmode!="singlerow"){if(this.selectedrowindexes.indexOf(e.bounddata.boundindex)!=-1){d=true}}else{if(e.bounddata.boundindex==this.selectedrowindex){d=true}}}return d},_rendervisualcell:function(w,i,n,k,q,u,j,o,d,h,p){var f=null;var g=this.columns.records[h];if(g.hidden){var e=o.cells[h];e.innerHTML="";return}cellvalue=this._getcellvalue(g,d);var e=o.cells[h];var t=i;if(g.cellclassname!=""&&g.cellclassname){t+=" "+g.cellclassname}if(this.selectionmode.indexOf("cell")!=-1){if(this.selectedcells[d.boundindex+"_"+g.datafield]){n=true}else{n=false}}var m=this.showsortcolumnbackground&&this.sortcolumn&&g.datafield==this.sortcolumn;if(m){t+=" "+this.toTP("jqx-grid-cell-sort")}if(g.filter&&this.showfiltercolumnbackground){t+=" "+this.toTP("jqx-grid-cell-filter")}if(g.pinned&&this.showpinnedcolumnbackground){t+=" "+this.toTP("jqx-grid-cell-pinned")}if(this.altrows&&d.group==undefined){var v=d.visibleindex;if(v>=this.altstart){if((this.altstart+v)%(1+this.altstep)==0){if(!m){t+=" "+this.toTP("jqx-grid-cell-alt")}else{t+=" "+this.toTP("jqx-grid-cell-sort-alt")}if(g.filter&&this.showfiltercolumnbackground){t+=" "+this.toTP("jqx-grid-cell-filter-alt")}if(g.pinned&&this.showpinnedcolumnbackground){t+=" "+this.toTP("jqx-grid-cell-pinned-alt")}}}}if(h<=j){if(u||this.rowdetails){var r=b(e);var l=this.columns.records[h].width;if(parseInt(e.style.width)!=l){r.width(l)}}}var s=true;if(this.rowdetails&&k){if(q&&!u){t+=" "+this.toTP("jqx-grid-details-cell")}else{if(u){t+=" "+this.toTP("jqx-grid-group-details-cell")}}if(this.showrowdetailscolumn){if(d.group==undefined&&h==j){if(q){t+=" "+this.toTP("jqx-grid-group-expand")}else{t+=" "+this.toTP("jqx-grid-group-collapse")}s=false}}}if(n&&s){t+=" "+this.toTP("jqx-grid-cell-selected");t+=" "+this.toTP("jqx-fill-state-pressed")}if(e.className!=t){e.className=t}if(d.group!=undefined){cellvalue="";e.title="";e.innerHTML="";return}w(this,g,d,cellvalue,e)},_rendercell:function(j,f,m,l,e){var g=m.uniqueid+"_"+f.visibleindex;if(j.editcell&&j.editrow==undefined){if(j.editcell.row==m.boundindex&&j.editcell.column==f.datafield){j.editcell.element=e;if(j.editcell.editing){if(j._showcelleditor){j._showcelleditor(j.editcell.row,f,j.editcell.element,j.editcell.init);return}}}}else{if(j.editrow!=undefined){if(j.editrow==m.boundindex){j.editcells[f.datafield].element=e;if(j.editcells[f.datafield].editing){if(j._showcelleditor){j._showcelleditor(j.editcells[f.datafield].row,f,e,j.editcells[f.datafield].init);return}}}}}var i=j._cellscache[g];if(i){if(f.columntype=="checkbox"){if(j.host.jqxCheckBox){if(l===""){l=null}var h=e.innerHTML.toString().length==0;if(e.checkbox&&!j.groupable&&!h){e.checkboxrow=m.boundindex;if(l==""){l=false}if(l=="1"){l=true}if(l=="0"){l=false}if(l==1){l=true}if(l==0){l=false}if(l=="true"){l=true}if(l=="false"){l=false}e.checkbox.jqxCheckBox("_setState",l)}else{j._rendercheckboxcell(j,e,f,m,l)}return}}else{if(f.columntype=="button"){if(j.host.jqxButton){if(l==""){l=false}if(f.cellsrenderer!=null){l=f.cellsrenderer(m.boundindex,f.datafield,l,k,f.getcolumnproperties())}if(e.button&&!j.groupable){e.buttonrow=m.boundindex;e.button.val(l)}else{j._renderbuttoncell(j,e,f,m,l)}return}}}var d=i.element;if(e.innerHTML!=d){e.innerHTML=d;if(j.enabletooltips){e.title=i.title}}return}if(j.enabletooltips){if(f.cellsformat!=""){if(b.jqx.dataFormat){if(b.jqx.dataFormat.isNumber(l)){l=b.jqx.dataFormat.formatnumber(l,f.cellsformat,j.gridlocalization)}else{if(b.jqx.dataFormat.isDate(l)){l=b.jqx.dataFormat.formatdate(l,f.cellsformat,j.gridlocalization)}}}}e.title=l}if(f.columntype=="checkbox"){j._rendercheckboxcell(j,e,f,m,l);j._cellscache[g]={element:"",title:l};return}else{if(f.columntype=="button"){if(f.cellsrenderer!=null){l=f.cellsrenderer(m.boundindex,f.datafield,l,k,f.getcolumnproperties())}j._renderbuttoncell(j,e,f,m,l);j._cellscache[g]={element:"",title:l};return}else{if(f.columntype=="number"){l=m.visibleindex}}}var k=j._defaultcellsrenderer(l,f);var d=null;if(f.cellsrenderer!=null){d=f.cellsrenderer(m.boundindex,f.datafield,l,k,f.getcolumnproperties())}else{d=k}if(d==null){d=k}if(j.WinJS){WinJS.Utilities.setInnerHTMLUnsafe(e,d)}else{e.innerHTML=d}j._cellscache[g]={element:e.innerHTML,title:l};return true},_isIE10:function(){if(this._browser==undefined){var d=b.jqx.utilities.getBrowser();if(d.browser=="msie"&&parseInt(d.version)>9){this._browser=true}else{this._browser=false}}return this._browser},_rendercheckboxcell:function(f,d,e,j,g){if(f.host.jqxCheckBox){var i=b(d);if(g===""){g=null}if(g=="1"){g=true}if(g=="0"){g=false}if(g==1){g=true}if(g==0){g=false}if(g=="true"){g=true}if(g=="false"){g=false}if(i.find(".jqx-checkbox").length==0){d.innerHTML='<div tabIndex=0 style="opacity: 0.99; position: absolute; top: 50%; left: 50%; margin-top: -7px; margin-left: -10px;"></div>';b(d.firstChild).jqxCheckBox({hasThreeStates:e.threestatecheckbox,enableContainerClick:false,animationShowDelay:0,animationHideDelay:0,locked:true,theme:f.theme,checked:g});if(this.editable&&e.editable){b(d.firstChild).jqxCheckBox({locked:false})}d.checkbox=b(d.firstChild);d.checkboxrow=j.boundindex;var h=b.data(d.firstChild,"jqxCheckBox").instance;h.updated=function(n,m,p){if(e.editable){var o=f.table[0].rows.length;var r=f._getcolumnindex(e.datafield);if(f.editrow==undefined){if(e.cellbeginedit){var q=e.cellbeginedit(j.boundindex,e.datafield,e.columntype,!m);if(q==false){f.setcellvalue(d.checkboxrow,e.datafield,!m,true);return}}for(var l=0;l<o;l++){var k=f.table[0].rows[l].cells[r].firstChild;b(k).jqxCheckBox("destroy")}if(f.editcell&&f.editcell.validated==false){f.setcellvalue(d.checkboxrow,e.datafield,!m,true)}else{f._raiseEvent(17,{rowindex:d.checkboxrow,datafield:e.datafield,value:p,columntype:e.columntype});f.setcellvalue(d.checkboxrow,e.datafield,m,true);f._raiseEvent(18,{rowindex:d.checkboxrow,datafield:e.datafield,oldvalue:p,value:m,columntype:e.columntype})}}}}}else{d.checkboxrow=j.boundindex;b(d.firstChild).jqxCheckBox("_setState",g)}}},_renderbuttoncell:function(f,d,e,i,g){if(f.host.jqxButton){var h=b(d);if(g==""){g=false}if(h.find(".jqx-button").length==0){d.innerHTML='<input type="button" style="opacity: 0.99; position: absolute; top: 0%; left: 0%; padding: 0px; margin-top: 2px; margin-left: 2px;"/>';b(d.firstChild).val(g);b(d.firstChild).attr("hideFocus","true");b(d.firstChild).jqxButton({theme:f.theme,height:f.rowsheight-4,width:e.width-4});d.button=b(d.firstChild);d.buttonrow=i.boundindex;b(d.firstChild).bind("click",function(j){if(e.buttonclick){e.buttonclick(d.buttonrow,j)}})}else{d.buttonrow=i.boundindex;b(d.firstChild).val(g)}}},_clearvisualrow:function(g,f,o,i,n){var m=this.toTP("jqx-grid-cell");if(f){m=" "+this.toTP("jqx-grid-group-cell")}var p=this.table[0].rows;for(var k=0;k<i+n;k++){if(p[o]){var e=p[o].cells[k];if(e.className!=m){e.className=m}var d=this.columns.records[k];if(this._horizontalvalue!=g&&!d.pinned){var h=-g;e.style.marginLeft=-g+"px"}var l=d.width;if(l<d.minwidth){l=d.minwidth}if(l>d.maxwidth){l=d.maxwidth}if(parseInt(e.style.width)!=l){b(e).width(l)}if(e.title!=""){e.title=""}if(e.innerHTML!=""){e.innerHTML=""}}}if(p[o]){if(parseInt(p[o].style.height)!=this.rowsheight){b(p[o]).height(this.rowsheight)}}},_findgroupstate:function(e){var d=this._findgroup(e);if(d==null){return false}return d.expanded},_findgroup:function(e){var d=null;if(this.expandedgroups[e]){return this.expandedgroups[e]}return d},_clearcaches:function(){this._columnsbydatafield=new Array();this._pagescache=new Array();this._pageviews=new Array();this._cellscache=new Array();this.heights=new Array();this.hiddens=new Array();this.hiddenboundrows=new Array();this.heightboundrows=new Array();this.detailboundrows=new Array();this.details=new Array();this.expandedgroups=new Array();this._rowdetailscache=new Array();this._rowdetailselementscache=new Array();if(b.jqx.dataFormat){b.jqx.dataFormat.cleardatescache()}this.tableheight=null},_getColumnText:function(d){if(this._columnsbydatafield==undefined){this._columnsbydatafield=new Array()}if(this._columnsbydatafield[d]){return this._columnsbydatafield[d]}var f=d;var e=null;b.each(this.columns.records,function(){if(this.datafield==d){f=this.text;e=this;return false}});this._columnsbydatafield[d]={label:f,column:e};return this._columnsbydatafield[d]},isscrollingvertically:function(){var d=(this.vScrollBar.jqxScrollBar("isScrolling"));return d},_renderrowdetails:function(n,t,d,s,l,v){var x=b(t);var g=0;var p=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:(this.groups.length)*this.groupindentwidth;if(this.groupable&&this.groups.length>0){for(var o=0;o<=l;o++){var e=b(t.cells[o]);e[0].innerHTML="";e[0].className="jqx-grid-details-cell"}}var e=b(t.cells[g]);e.css("width","100%");x.height(d.rowdetailsheight);e[0].className=n;var m=d.bounddata.boundindex;var j=m+"_";if(this._rowdetailscache[j]){var q=this._rowdetailscache[j];var w=q.html;if(this.initrowdetails){if(this._rowdetailscache[j].element){var f=this._rowdetailscache[j].element;var i=e.offset();var u=this.gridcontent.offset();var r=parseInt(i.top)-parseInt(u.top);var k=parseInt(i.left)-parseInt(u.left);b(f).css("top",r);b(f).css("left",k);b(f).css("display","block")}}else{e[0].innerHTML=w}return}e[0].innerHTML="";if(!this.enablerowdetailsindent){p=0}var h='<div style="overflow: hidden; width: 100%; height: 100%; margin-left: '+p+'px;">'+d.rowdetails+"</div>";this._rowdetailscache[j]={id:t.id,html:h};if(this.initrowdetails){var f=b(h)[0];b(this.gridcontent).prepend(b(f));b(f).css("position","absolute");b(f).width(this.host.width()-p);b(f).height(e.height());var i=e.offset();b(f).css("z-index",2000);if(this.isTouchDevice()){b(f).css("z-index",99999)}var i=e.offset();var u=this.gridcontent.offset();var r=parseInt(i.top)-parseInt(u.top);var k=parseInt(i.left)-parseInt(u.left);b(f).css("top",r);b(f).css("left",k);this.content[0].scrollTop=0;this.content[0].scrollLeft=0;this.initrowdetails(m,f,this.element,this.getrowdata(m));this._rowdetailscache[j].element=f;this._rowdetailselementscache[m]=f}else{e[0].innerHTML=h}},_defaultcellsrenderer:function(e,d){if(d.cellsformat!=""){if(!this.enabletooltips){if(b.jqx.dataFormat){if(b.jqx.dataFormat.isDate(e)){e=b.jqx.dataFormat.formatdate(e,d.cellsformat,this.gridlocalization)}else{if(b.jqx.dataFormat.isNumber(e)){e=b.jqx.dataFormat.formatnumber(e,d.cellsformat,this.gridlocalization)}}}}}if(this.enableellipsis){if(d.cellsalign=="center"){return'<div style="text-overflow: ellipsis; overflow: hidden; padding-bottom: 2px; text-align: center; margin-top: 5px;">'+e+"</div>"}if(d.cellsalign=="left"){return'<div style="overflow: hidden; text-overflow: ellipsis; padding-bottom: 2px; text-align: left; margin: 4px;">'+e+"</div>"}if(d.cellsalign=="right"){return'<div style="overflow: hidden;  text-overflow: ellipsis; padding-bottom: 2px; text-align: right; margin: 4px;">'+e+"</div>"}}if(d.cellsalign=="center"){return'<div style="text-align: center; margin-top: 5px;">'+e+"</div>"}return'<span style="margin: 4px; float: '+d.cellsalign+';">'+e+"</span>"},_getcellvalue:function(d,f){var e=null;e=f.bounddata[d.datafield];if(e==null){e=""}return e},getcell:function(h,d){if(h==null||d==null){return null}var e=parseInt(h);var g=h;var f="";if(!isNaN(e)){g=this.getrowdata(e)}if(g!=null){f=g[d]}return this._getcellresult(f,h,d)},getrenderedcell:function(h,d){if(h==null||d==null){return null}var e=parseInt(h);var g=h;var f="";if(!isNaN(e)){g=this.getrenderedrowdata(e)}if(g!=null){f=g[d]}return this._getcellresult(f,h,d)},_getcellresult:function(k,n,e){var f=this.getcolumn(e);if(f==null||f==undefined){return null}var i=f.getcolumnproperties();var g=i.hidden;var d=i.width;var m=i.pinned;var h=i.cellsalign;var j=i.cellsformat;var l=this.getrowheight(n);if(l==false){return null}return{value:k,row:n,column:e,width:d,height:l,hidden:g,pinned:m,align:h,format:j}},setcellvalue:function(j,q,t,f,n){if(j==null||q==null){return false}var e=parseInt(j);var i=e;var g=j;if(!isNaN(e)){g=this.getrowdata(e)}var r=false;if(this.filterable&&this._initfilterpanel&&this.dataview.filters.length){r=true}if(this.virtualmode){this._pagescache=new Array()}var m="";if(g!=null&&g[q]!=t){m=g[q];if(b.jqx.dataFormat.isNumber(m)){t=new Number(t);t=parseFloat(t);if(isNaN(t)){t=0}}g[q]=t;var w=this.getrenderedrowdata(e,true);w[q]=t;if(r){i=g.dataindex;this.dataview.cachedrecords[g.dataindex][q]=t}}else{this._renderrows(this.virtualsizeinfo);return false}if(this.source&&this.source._knockoutdatasource&&!this._updateFromAdapter&&this.autokoupdates){if(this.source._source._localdata){var s=this.source._source._localdata()[e];this.source.suspendKO=true;this.source._source._localdata.replace(s,b.extend({},g));this.source.suspendKO=false}}if(this.sortcolumn&&this.dataview.sortby){var o=this.getsortinformation();this.dataview.clearsortdata();this.dataview.sortby(o.sortcolumn,o.sortdirection.ascending)}this._cellscache=new Array();if(this.source.updaterow&&(n==undefined||n==true)){var l=false;var v=this;var p=function(x){if(false==x){v.setcellvalue(j,q,m,true,false)}};try{var k=this.getrowid(i);l=this.source.updaterow(k,g,p);if(l==undefined){l=true}}catch(u){l=false;v.setcellvalue(j,q,m,true,false);return}}var h=this.vScrollInstance.value;if(this._updating&&f==undefined){f=false}if(f==true||f==undefined){var v=this;var d=function(){if(v.pageable&&v.updatepagerdetails){v.updatepagerdetails();if(v.autoheight){v._updatepageviews()}}};if(r){this.dataview.refresh();this.rendergridcontent(true,true);d()}else{if(this.sortcolumn){this.dataview.reloaddata();this.rendergridcontent(true,true);d()}else{if(this.groupable&&this.groups.length>0){this.dataview.updateview();this._renderrows(this.virtualsizeinfo)}else{this.dataview.updateview();this._renderrows(this.virtualsizeinfo)}}}}this.vScrollInstance.setPosition(h);if(this.showaggregates&&this._updatecolumnsaggregates){this._updatecolumnsaggregates()}this._raiseEvent(19,{rowindex:j,datafield:q,newvalue:t,oldvalue:m});return true},getcellvalue:function(h,d){if(h==null||d==null){return null}var e=parseInt(h);var g=h;if(!isNaN(e)){g=this.getrowdata(e)}if(g!=null){var f=g[d];return f}return null},getrows:function(){var f=this.dataview.records.length;if(this.dataview.sortdata){var g=new Array();for(var d=0;d<f;d++){var e={};e=b.extend({},this.dataview.sortdata[d].value);g[d]=e}return g}else{return this.dataview.records}},getrowdata:function(d){if(d==undefined){d=0}if(this.virtualmode){var e=this.dataview.records[d];return e}else{if(d>=0&&d<this.dataview.bounditems.length){var e=this.dataview.records[d];return e}}return null},getrenderedrowdata:function(d,f){if(d==undefined){d=0}if(this.virtualmode){var g=this.getrowvisibleindex(d);var e=this.dataview.loadedrecords[g];return e}if(d>=0&&d<this.dataview.bounditems.length){if(this.groupable&&this.groups.length>0){var g=this.getrowvisibleindex(d);var e=this.dataview.loadedrecords[g]}else{var e=this.dataview.loadedrecords[d];if(this.pageable&&(f==undefined||f==false)){var e=this.dataview.loadedrecords[this.dataview.pagesize*this.dataview.pagenum+d]}}return e}return null},getloadedrows:function(){return this.dataview.loadedrecords},getvisiblerows:function(){if(this.virtualmode){return this.dataview.loadedrecords}if(this.pageable){var f=[];for(var e=0;e<this.dataview.pagesize;e++){var d=this.dataview.loadedrecords[e+(this.dataview.pagesize*this.dataview.pagenum)];if(d==undefined){break}f.push(d)}return f}else{if(this._startboundindex!=undefined&&this._endboundindex!=undefined){var f=[];for(var e=this._startboundindex;e<=this._endboundindex;e++){var d=this.dataview.loadedrecords[e];if(d==undefined){break}f.push(d)}return f}}return this.dataview.loadedrecords},getrowid:function(d){if(d==undefined){d=0}if(this.virtualmode){var f=this.getrowvisibleindex(d);var e=this.dataview.loadedrecords[f];if(e){return e.uid}}else{var e=null;if(d>=0&&d<this.dataview.bounditems.length){if(this.groupable&&this.groups.length>0){var f=this.getrowvisibleindex(d);var e=this.dataview.loadedrecords[f]}else{var e=this.dataview.loadedrecords[d]}if(e){return e.uid}}}return null},_updateGridData:function(){var d=false;if(this.filterable&&this._initfilterpanel&&this.dataview.filters.length){d=true}if(d){this.dataview.refresh();this.render()}else{if(this.sortcolumn||(this.groupable&&this.groups.length>0)){this.dataview.reloaddata();this.render()}else{this._cellscache=new Array();this._pagescache=new Array();this._renderrows(this.virtualsizeinfo)}}},updaterow:function(i,k,g){if(i!=undefined&&k!=undefined){var h=this;var j=false;h._datachanged=true;var e=function(o,n,s){var q=false;if(!b.isArray(n)){q=o.dataview.updaterow(n,s)}else{b.each(n,function(t,u){q=o.dataview.updaterow(this,s[t],false)});o.dataview.refresh()}var r=o.vScrollInstance.value;if(g==undefined||g==true){if(o._updating==undefined||o._updating==false){o._updateGridData()}}if(o.showaggregates&&o._updatecolumnsaggregates){o._updatecolumnsaggregates()}if(o.source&&o.source._knockoutdatasource&&!o._updateFromAdapter&&o.autokoupdates){if(o.source._source._localdata){var m=o.dataview.recordsbyid["id"+n];var p=o.dataview.records.indexOf(m);var l=o.source._source._localdata()[p];o.source.suspendKO=true;o.source._source._localdata.replace(l,b.extend({},m));o.source.suspendKO=false}}o.vScrollInstance.setPosition(r);return q};if(this.source.updaterow){var d=function(l){if(l==true||l==undefined){e(h,i,k)}};try{j=this.source.updaterow(i,k,d);if(j==undefined){j=true}}catch(f){j=false}}else{j=e(h,i,k)}return j}return false},deleterow:function(h){if(h!=undefined){this._datachanged=true;var i=false;var g=this;var e=function(k,j){var l=false;var m=k.vScrollInstance.value;if(!b.isArray(j)){var l=k.dataview.deleterow(j)}else{b.each(j,function(){l=k.dataview.deleterow(this,false)});k.dataview.refresh()}if(k._updating==undefined||k._updating==false){k._render(true,true,false,false);if(k.vScrollBar.css("visibility")!="visible"){k._arrange();k._updatecolumnwidths();k._updatecellwidths();k._renderrows(k.virtualsizeinfo)}}if(k.source&&k.source._knockoutdatasource&&!k._updateFromAdapter&&k.autokoupdates){if(k.source._source._localdata){k.source.suspendKO=true;k.source._source._localdata.pop(rowdata);k.source.suspendKO=false}}k.vScrollInstance.setPosition(m);return l};if(this.source.deleterow){var d=function(j){if(j==true||j==undefined){e(g,h)}};try{this.source.deleterow(h,d);if(i==undefined){i=true}}catch(f){i=false}}else{i=e(g,h)}return i}return false},addrow:function(i,l,d){if(l!=undefined){this._datachanged=true;if(d==undefined){d="last"}var k=false;var h=this;var g=function(n,m,q,e){var p=n.vScrollInstance.value;var o=false;if(!b.isArray(q)){o=n.dataview.addrow(m,q,e)}else{b.each(q,function(r,s){var t=null;if(m!=null&&m[r]!=null){t=m[r]}o=n.dataview.addrow(t,this,e,false)});n.dataview.refresh()}if(n._updating==undefined||n._updating==false){n._render(true,true,false,false)}if(n.source&&n.source._knockoutdatasource&&!n._updateFromAdapter&&n.autokoupdates){if(n.source._source._localdata){n.source.suspendKO=true;n.source._source._localdata.push(q);n.source.suspendKO=false}}n.vScrollInstance.setPosition(p);return o};if(this.source.addrow){var f=function(e){if(e==true||e==undefined){g(h,i,l,d)}};try{k=this.source.addrow(l.uid,l,d,f);if(k==undefined){k=true}}catch(j){k=false}if(k==false){return false}}else{g(this,i,l,d)}return k}return false},_findvisiblerow:function(g,h){if(g==undefined){g=parseInt(this.vScrollInstance.value)}var e=0;if(h==undefined||h==null){h=this.rows.records}var d=h.length;while(e<=d){mid=parseInt((e+d)/2);var f=h[mid];if(f==undefined){break}if(f.top>g&&f.top+f.height>g){d=mid-1}else{if(f.top<g&&f.top+f.height<g){e=mid+1}else{return mid;break}}}return -1},_updatecellwidths:function(){var f=this.virtualsizeinfo;var p=this;if(this.gridcontent==undefined){return}if(this.table==undefined){this.table=this.gridcontent.find("#contenttable"+this.element.id)}var k=this.groupable&&this.groups.length>0;var q=0;var l=f.visiblerecords;if(this.pageable&&this.autoheight){l=this.dataview.pagesize;if(this.groupable){this.dataview.updateview();l=this.dataview.rows.length}}if(!this.pageable&&this.autoheight){l=this.dataview.totalrecords}if(this.rowdetails){l+=this.dataview.pagesize}var r=this.columns.records.length;var t=this.table[0].rows;for(var n=0;n<l;n++){var d=t[n];if(!d){break}var s=d.cells;var h=0;for(var m=0;m<r;m++){var g=this.columns.records[m];var e=g.width;var o=b(s[m]);if(parseInt(o[0].style.left)!=h){o.css("left",h)}if(parseInt(o[0].style.width)!=e){o.width(e)}o[0].left=h;if(!(g.hidden&&g.hideable)){h+=e}else{o.css("display","none")}}if(q==0){this.table.width(parseInt(h)+2);q=h}}if(this.showaggregates&&this._updateaggregates){this._updateaggregates()}if(this.showfilterrow&&this.filterable&&this._updatefilterrowui){this._updatefilterrowui()}this._updatescrollbarsafterrowsprerender()},_updatescrollbarsafterrowsprerender:function(){var d=this.hScrollBar.css("visibility");var f=0;if(this.vScrollBar.css("visibility")=="visible"){f=this.scrollbarsize+3}if(this.table.width()-2>this.host.width()-f){if(d!="visible"){this.hScrollBar.css("visibility","visible");this._arrange()}if(this.vScrollBar.css("visibility")=="visible"){var e=this.vScrollBar.jqxScrollBar("max");this.vScrollBar.jqxScrollBar("max",e+this.scrollbarsize+4)}this.hScrollBar.jqxScrollBar("max",f+this.table.width()-this.host.width())}else{if(d!="hidden"){this.hScrollBar.css("visibility","hidden");this._arrange()}}this._renderhorizontalscroll()},_prerenderrows:function(f){var s=this;if(this.prerenderrequired==true){this.prerenderrequired=false;if(this.editable&&this._destroyeditors){this._destroyeditors()}if(this.gridcontent==undefined){return}this.gridcontent.find("#contenttable"+this.element.id).remove();if(this.table!=null){this.table.remove();this.table=null}this.table=b('<div id="contenttable'+this.element.id+'" style="overflow: hidden; position: relative;" height="100%"></div>');this.gridcontent.addClass(this.toTP("jqx-grid-content"));this.gridcontent.addClass(this.toTP("jqx-widget-content"));this.gridcontent.append(this.table);var k=this.groupable&&this.groups.length>0;var t=0;this.table[0].rows=new Array();var r=this.toTP("jqx-grid-cell");if(k){r=" "+this.toTP("jqx-grid-group-cell")}var m=f.visiblerecords;if(this.pageable&&this.autoheight){m=this.dataview.pagesize;if(this.groupable){this.dataview.updateview();m=this.dataview.rows.length}}if(!this.pageable&&this.autoheight){m=this.dataview.totalrecords}if(this.groupable&&this.autoheight&&!this.pageable){m=this.dataview.rows.length}if(this.rowdetails){m+=this.dataview.pagesize}var u=this.columns.records.length;if(b.browser.msie&&b.browser.version>8){this.table.css("opacity","0.99")}if(b.browser.mozilla){this.table.css("opacity","0.99")}if(navigator.userAgent.indexOf("Safari")!=-1){this.table.css("opacity","0.99")}var l=b.browser.msie&&b.browser.version<8;if(l){this.host.attr("hideFocus","true")}var v=this.tableZIndex;if(m*u>v){v=m*u}var q=this.dataview.records.length==0;for(var o=0;o<m;o++){var d=b('<div style="position: relative;" id="row'+o+this.element.id+'"></div>');var h=0;this.table[0].rows[o]=d[0];this.table[0].rows[o].cells=new Array();for(var n=0;n<u;n++){var g=this.columns.records[n];var e=g.width;if(e<g.minwidth){e=g.minwidth}if(e>g.maxwidth){e=g.maxwidth}var p=b('<div style="overflow: hidden; position: absolute; height: 100%; left: '+h+"px; z-index: "+v--+"; width:"+e+'px;" class="'+r+'"></div>');d.append(p);if(!(g.hidden&&g.hideable)){h+=e}else{p.css("display","none");v++}this.table[0].rows[o].cells[n]=p[0]}if(l){d.css("z-index",v--)}if(t==0){this.table.width(parseInt(h)+2);t=h}this.table.append(d);d.height(this.rowsheight)}if(m==0){var h=0;if(this.showemptyrow){var d=b('<div style="position: relative;" id="row0'+this.element.id+'"></div>');this.table.append(d);d.height(this.rowsheight);this.table[0].rows[0]=d[0];this.table[0].rows[0].cells=new Array()}for(var n=0;n<u;n++){var g=this.columns.records[n];var e=g.width;if(this.showemptyrow){var p=b('<div style="position: absolute; height: 100%; left: '+h+"px; z-index: "+v--+"; width:"+e+'px;" class="'+r+'"></div>');p.height(this.rowsheight);d.append(p);this.table[0].rows[0].cells[n]=p[0]}if(e<g.minwidth){e=g.minwidth}if(e>g.maxwidth){e=g.maxwidth}if(!(g.hidden&&g.hideable)){h+=e}}this.table.width(parseInt(h)+2);t=h}this._updatescrollbarsafterrowsprerender();if(this.rendered){this.rendered("rows")}}},_groupsheader:function(){return this.groupable&&this.showgroupsheader},_arrange:function(){var t=null;var q=null;this.tableheight=null;var w=this;var k=false;var j=false;if(this.width!=null&&this.width.toString().indexOf("px")!=-1){t=this.width}else{if(this.width!=undefined&&!isNaN(this.width)){t=this.width}}if(this.width!=null&&this.width.toString().indexOf("%")!=-1){t=this.width;k=true}if(this.height!=null&&this.height.toString().indexOf("px")!=-1){q=this.height}else{if(this.height!=undefined&&!isNaN(this.height)){q=this.height}}if(this.height!=null&&this.height.toString().indexOf("%")!=-1){q=this.height;j=true}var i=function(){var x=0;var y=w.showheader?w.columnsheader!=null?w.columnsheader.height()+2:0:0;x+=y;if(w.pageable){x+=w.pagerheight}if(w._groupsheader()){x+=w.groupsheaderheight}if(w.showtoolbar){x+=w.toolbarheight}if(w.showstatusbar){x+=w.statusbarheight}if(w.hScrollBar[0].style.visibility=="visible"){x+=20}return x};if(this.autoheight&&this.virtualsizeinfo){if(this.pageable&&this.gotopage){var u=this.host.height()-this._gettableheight();q=u+(this._pageviews[0]?this._pageviews[0].height:0);if(q==0){q=i()}if(this.showemptyrow&&this.dataview.totalrecords==0){q+=this.rowsheight}}else{var u=this.host.height()-this._gettableheight();if(this._pageviews.length>0){q=u+this._pageviews[this._pageviews.length-1].height+this._pageviews[this._pageviews.length-1].top;this.vScrollBar[0].style.visibility="hidden"}else{q=i();if(this.showemptyrow){q+=this.rowsheight}}}}else{if(this.autoheight){q=this.dataview.totalrecords*this.rowsheight;if(this._loading){q=250;this.dataloadelement.height(q)}q+=i();if(q>10000){q=10000}}}var e=this.host.css("border-width");if(e==null){e=0}if(t!=null){t=parseInt(t);this.host.width(this.width);if(k){t=this.host.width();if(t<=2){t=600;this.host.width(t)}if(!this._oldWidth){this._oldWidth=t}}}else{this.host.width(250)}if(q!=null){if(!j){q=parseInt(q)}this.host.height(q);if(j&&!this.autoheight){q=this.host.height();if(q==0){q=400;this.host.height(q)}if(!this._oldHeight){this._oldHeight=q}}}else{this.host.height(250)}if(this.autoheight){this.tableheight=null;this._gettableheight()}var p=0;if(this.showtoolbar){this.toolbar.width(t);this.toolbar.height(this.toolbarheight-1);this.toolbar.css("top",0);p+=this.toolbarheight;q-=parseInt(this.toolbarheight)}else{this.toolbar.height(0)}if(this.showstatusbar){this.statusbar.width(t);this.statusbar.height(this.statusbarheight-1)}else{this.statusbar.height(0)}if(this._groupsheader()){this.groupsheader.width(t);this.groupsheader.height(this.groupsheaderheight);this.groupsheader.css("top",p);var r=this.groupsheader.height()+1;p+=r;if(q>r){q-=parseInt(r)}}else{this.groupsheader.width(t);this.groupsheader.height(this.groupsheaderheight);this.groupsheader.css("top",p);this.content.css("top",p+this.groupsheader.height())}var d=this.scrollbarsize;if(isNaN(d)){d=parseInt(d);if(isNaN(d)){d="17px"}else{d=d+"px"}}d=parseInt(d);var m=4;var g=2;var h=0;if(this.vScrollBar[0].style.visibility=="visible"){h=d+m}if(this.hScrollBar[0].style.visibility=="visible"){g=d+m+2}var n=0;if(this.pageable){n=this.pagerheight;g+=this.pagerheight}if(this.showstatusbar){g+=this.statusbarheight;n+=this.statusbarheight}this.hScrollBar.height(d);this.hScrollBar.css({top:p+q-m-d-n+"px",left:"0px"});this.hScrollBar.width(t-d-m+"px");if(h==0){this.hScrollBar.width(t-2)}this.vScrollBar.width(d);this.vScrollBar.height(parseInt(q)-g+"px");this.vScrollBar.css({left:parseInt(t)-parseInt(d)-m+"px",top:p});var l=this.vScrollInstance;l.disabled=this.disabled;l.refresh();var s=this.hScrollInstance;s.disabled=this.disabled;s.refresh();var o=function(x){if((x.vScrollBar[0].style.visibility=="visible")&&(x.hScrollBar[0].style.visibility=="visible")){x.bottomRight[0].style.visibility="visible";x.bottomRight.css({left:1+parseInt(x.vScrollBar.css("left")),top:parseInt(x.hScrollBar.css("top"))});x.bottomRight.width(parseInt(d)+3);x.bottomRight.height(parseInt(d)+4);if(x.showaggregates){x.bottomRight.css("z-index",99);x.bottomRight.height(parseInt(d)+4+x.statusbarheight);x.bottomRight.css({top:parseInt(x.hScrollBar.css("top"))-x.statusbarheight})}}else{x.bottomRight[0].style.visibility="hidden"}};o(this);this.content.width(t-h);this.content.height(q-g+2);this.content.css("top",p);if(this.showstatusbar){this.statusbar.css("top",p+q-this.statusbarheight-(this.pageable?this.pagerheight:0));if(this.showaggregates){if(this.hScrollBar.css("visibility")=="visible"){this.hScrollBar.css({top:p+q-m-d-n+this.statusbarheight+"px",left:"0px"});this.statusbar.css("top",1+p+q-d-5-this.statusbarheight-(this.pageable?this.pagerheight:0))}o(this)}}if(this.pageable){this.pager.width(t);this.pager.height(this.pagerheight);this.pager.css("top",p+q-this.pagerheight)}else{this.pager.height(0)}if(this.table!=null){var f=0;if(this.vScrollBar[0].style.visibility=="visible"){f=this.scrollbarsize+4}var v=f+this.table.width()-this.host.width();this.hScrollBar.jqxScrollBar("max",v);if(this.hScrollBar[0].style.visibility=="visible"&&v==0){this.hScrollBar[0].style.visibility="hidden";this._arrange()}}this.dataloadelement.width(this.host.width());this.dataloadelement.height(this.host.height());this._hostwidth=this.host.width()},destroy:function(){if(this.host.jqxDropDownList){var g=b(b.find("#filterclearbutton"+this.element.id));var f=b(b.find("#filterbutton"+this.element.id));var j=b(b.find("#filter1"+this.element.id));var e=b(b.find("#filter2"+this.element.id));var i=b(b.find("#filter3"+this.element.id));var h=b(b.find(".filtertext1"+this.element.id));var d=b(b.find(".filtertext2"+this.element.id));if(h.length>0&&d.length>0){h.removeClass();d.removeClass();h.remove();d.remove()}this.removeHandler(g,"click");this.removeHandler(f,"click");j.jqxDropDownList("destroy");e.jqxDropDownList("destroy");i.jqxDropDownList("destroy")}if(this.host.jqxMenu){if(this.gridmenu){this.removeHandler(b(document),"click.menu"+this.element.id);this.removeHandler(this.gridmenu,"keydown");this.removeHandler(this.gridmenu,"closed");this.removeHandler(this.gridmenu,"itemclick");this.gridmenu.jqxMenu("destroy")}}if(this.pagershowrowscombo){this.pagershowrowscombo.jqxDropDownList("destroy")}if(this.pagerrightbutton){this.removeHandler(this.pagerrightbutton,"mousedown");this.removeHandler(this.pagerrightbutton,"mouseup");this.removeHandler(this.pagerrightbutton,"click");this.pagerrightbutton.jqxButton("destroy")}if(this.pagerleftbutton){this.removeHandler(this.pagerleftbutton,"mousedown");this.removeHandler(this.pagerleftbutton,"mouseup");this.removeHandler(this.pagerleftbutton,"click");this.pagerleftbutton.jqxButton("destroy")}this.removeHandler(b(document),"mousedown.resize"+this.element.id);this.removeHandler(b(document),"mouseup.resize"+this.element.id);this.removeHandler(b(document),"mousemove.resize"+this.element.id);this.columns=new b.jqx.collection(this.element);this.rows=new b.jqx.collection(this.element);this.hScrollInstance.destroy();this.vScrollInstance.destroy();this.hScrollBar.remove();this.vScrollBar.remove();this._removeHandlers();this._clearcaches();this.dataview._clearcaches();this.content.removeClass();this.content.remove();this.content=null;this.vScrollBar=null;this.hScrollBar=null;if(this.gridmenu){this.gridmenu=null}this.host.removeData();this.host.removeClass();this.host.remove();this.host=null},_initializeColumns:function(){if(this.columns&&this.columns.records){for(var e=0;e<this.columns.records.length;e++){this._removecolumnhandlers(this.columns.records[e])}}var h=this;var d=new b.jqx.collection(this.element);var g=0;if(!this._columns){this._columns=this.columns}else{this.columns=this._columns}if(this.groupable){b.each(this.groups,function(i){var j=new c(h,this);j.visibleindex=g++;j.width=h.groupindentwidth;d.add(j)})}if(this.rowdetails&&this.showrowdetailscolumn){var f=new c(h,this);f.visibleindex=g++;f.width=h.groupindentwidth;f.pinned=true;d.add(f)}b.each(this.columns,function(i){var j=new c(h,this);j.visibleindex=g++;d.add(j)});this.columns=d},_initializeRows:function(){var d=new b.jqx.collection(this.element);if(this.rows){this.rows.clear()}this.rows=d},_raiseEvent:function(h,e){if(e==undefined){e={owner:null}}var f=this.events[h];args=e;args.owner=this;var g=new jQuery.Event(f);g.owner=this;g.args=args;var d=this.host.trigger(g);e=g.args;return d},wheel:function(f,e){if(e.autoheight){f.returnValue=true;return true}var g=0;if(!f){f=window.event}if(f.originalEvent&&f.originalEvent.wheelDelta){f.wheelDelta=f.originalEvent.wheelDelta}if(f.wheelDelta){g=f.wheelDelta/120}else{if(f.detail){g=-f.detail/3}}if(g){var d=e._handleDelta(g);if(d){if(f.preventDefault){f.preventDefault()}if(f.originalEvent!=null){f.originalEvent.mouseHandled=true}if(f.stopPropagation!=undefined){f.stopPropagation()}}if(d){d=false;f.returnValue=d;return d}else{return false}}if(f.preventDefault){f.preventDefault()}f.returnValue=false},_handleDelta:function(f){var e=this.vScrollInstance.value;if(f<0){this.scrollDown()}else{this.scrollUp()}var d=this.vScrollInstance.value;if(e!=d){return true}return false},scrollDown:function(){if(this.vScrollBar.css("visibility")=="hidden"){return}var d=this.vScrollInstance;if(d.value+this.rowsheight<=d.max){d.setPosition(parseInt(d.value)+this.rowsheight)}else{d.setPosition(d.max)}},scrollUp:function(){if(this.vScrollBar.css("visibility")=="hidden"){return}var d=this.vScrollInstance;if(d.value-this.rowsheight>=d.min){d.setPosition(parseInt(d.value)-this.rowsheight)}else{d.setPosition(d.min)}},_removeHandlers:function(){var d=this;this.removeHandler(this.vScrollBar,"valuechanged");this.removeHandler(this.hScrollBar,"valuechanged");this.vScrollInstance.valuechanged=null;this.hScrollInstance.valuechanged=null;var e="mousedown";if(this.isTouchDevice()){e="touchend"}this.removeHandler(this.host,"dblclick");if(this.gridmenu){this.removeHandler(this.gridmenu,"keydown")}this.removeHandler(this.host,e);this.removeHandler(this.content,"mousemove",this._mousemovefunc);this.removeHandler(this.host,"mouseleave");this.removeHandler(this.content,"mouseenter");this.removeHandler(this.content,"mouseleave");this.removeHandler(this.content,"selectstart."+this.element.id);this.removeHandler(this.host,"dragstart."+this.element.id);this.removeHandler(this.host,"keydown.edit"+this.element.id);this.removeHandler(b(document),"keydown.edit"+this.element.id);this.removeHandler(b(document),"mousemove.selection"+this.element.id);this.removeHandler(b(document),"mouseup.selection"+this.element.id);if(this.editable){this.removeHandler(b(document),"click.grid"+this.element.id)}},_addHandlers:function(){var e=this;this.addHandler(this.host,"dragstart."+this.element.id,function(h){return false});if(this.editable){this.addHandler(b(document),"click.grid"+this.element.id,function(k){if(e.editable&&e.begincelledit){if(e.editcell){if(!e.vScrollInstance.isScrolling()&&!e.vScrollInstance.isScrolling()){var h=false;switch(e.editcell.columntype){case"datetimeinput":if(e.editcell.editor.jqxDateTimeInput&&e.editcell.editor.jqxDateTimeInput("container")[0].style.display=="block"){h=true}break;case"combobox":if(e.editcell.editor.jqxComboBox&&e.editcell.editor.jqxComboBox("container")[0].style.display=="block"){h=true}break;case"dropdownlist":if(e.editcell.editor.jqxDropDownList&&e.editcell.editor.jqxDropDownList("container")[0].style.display=="block"){h=true}break}if(h){return true}var i=e.host.offset();var l=e.host.width();var j=e.host.height();var m=false;if(k.pageY<i.top||k.pageY>i.top+j){m=true}if(k.pageX<i.left||k.pageX>i.left+l){m=true}if(m){e.endcelledit(e.editcell.row,e.editcell.column,false,true)}}}}})}var d=e.isTouchDevice();this.vScrollInstance.valuechanged=function(h){if(e.virtualsizeinfo){e._closemenu();e._renderrows(e.virtualsizeinfo);if(!e.pageable&&!e.groupable&&e.dataview.virtualmode){if(e.loadondemandupdate){clearTimeout(e.loadondemandupdate)}e.loadondemandupdate=setTimeout(function(){e.loadondemand=true;e._renderrows(e.virtualsizeinfo)},100)}if(d){e._lastScroll=new Date()}}};this.hScrollInstance.valuechanged=function(j){if(e.virtualsizeinfo){e._closemenu();var i=function(){e._renderhorizontalscroll();e._renderrows(e.virtualsizeinfo);if(e.editcell&&!e.editrow){if(e._showcelleditor&&e.editcell.editing){e._showcelleditor(e.editcell.row,e.getcolumn(e.editcell.column),e.editcell.element,e.editcell.init)}}};var h=e._browser==undefined?e._isIE10():e._browser;if(navigator&&navigator.userAgent.indexOf("Safari")!=-1){if(this._hScrollTimer){clearTimeout(this._hScrollTimer)}this._hScrollTimer=setTimeout(function(){i()},1)}else{if(b.browser.mozilla||h){if(this._hScrollTimer){clearTimeout(this._hScrollTimer)}this._hScrollTimer=setTimeout(function(){i()},0.01)}else{i()}}if(d){e._lastScroll=new Date()}}};this._mousewheelfunc=this._mousewheelfunc||function(h){if(!e.editcell&&e.enablemousewheel){e.wheel(h,e);return false}};this.removeHandler(this.host,"mousewheel",this._mousewheelfunc);this.addHandler(this.host,"mousewheel",this._mousewheelfunc);var g="mousedown";if(this.isTouchDevice()){g="touchend"}this.addHandler(this.host,g,function(i){if(e.isTouchDevice()){e._newScroll=new Date();if(e._newScroll-e._lastScroll<500){return false}if(b(i.target).ischildof(e.vScrollBar)){return false}if(b(i.target).ischildof(e.hScrollBar)){return false}}e._mousedown=new Date();var h=e._handlemousedown(i,e);if(e.isNestedGrid){if(!e.resizablecolumn){i.stopPropagation()}}e._lastmousedown=new Date();return h});this.addHandler(this.host,"dblclick",function(h){if(e.editable&&e.begincelledit&&e.editmode=="dblclick"){e._handledblclick(h,e)}e.mousecaptured=false;return true});this._mousemovefunc=function(h){if(e._handlemousemove){return e._handlemousemove(h,e)}};this.addHandler(this.content,"mousemove",this._mousemovefunc);this.addHandler(b(document),"mousemove.selection"+this.element.id,function(h){if(e._handlemousemoveselection){return e._handlemousemoveselection(h,e)}});this.addHandler(b(document),"mouseup.selection"+this.element.id,function(h){if(e._handlemouseupselection){e._handlemouseupselection(h,e)}});if(document.referrer!=""||window.frameElement){if(window.top!=null){if(window.parent&&document.referrer){parentLocation=document.referrer}if(parentLocation.indexOf(document.location.host)!=-1){var f=function(h){if(e._handlemouseupselection){e._handlemouseupselection(h,e)}};if(window.top.document.addEventListener){window.top.document.addEventListener("mouseup",f,false)}else{if(window.top.document.attachEvent){window.top.document.attachEvent("onmouseup",f)}}}}}this.focused=false;this.addHandler(this.content,"mouseenter",function(h){e.focused=true;if(e._overlayElement){if(e.vScrollInstance.isScrolling()||e.hScrollInstance.isScrolling()){e._overlayElement[0].style.visibility="visible"}else{e._overlayElement[0].style.visibility="hidden"}}});this.addHandler(this.content,"mouseleave",function(h){if(e._handlemousemove){if(e.enablehover){e._clearhoverstyle()}}if(e._overlayElement){e._overlayElement[0].style.visibility="hidden"}e.focused=false});this.addHandler(this.content,"selectstart."+this.element.id,function(h){if(e.enablebrowserselection){return true}if(!e.editcell&&!e.showfilterrow){return false}});this.addHandler(b(document),"keydown.edit"+this.element.id,function(j){var i=j.charCode?j.charCode:j.keyCode?j.keyCode:0;if(e.handlekeyboardnavigation){var k=e.handlekeyboardnavigation(j);if(k==true){return false}}if(e.editable&&e.editcell){if(i==13||i==27){if(e._handleeditkeydown){h=e._handleeditkeydown(j,e)}}}if(i==27){e.mousecaptured=false;if(e.selectionarea.css("visibility")=="visible"){e.selectionarea.css("visibility","hidden")}}if(b.browser.msie&&e.focused&&!e.isNestedGrid){var h=true;var i=j.charCode?j.charCode:j.keyCode?j.keyCode:0;if(!e.editcell&&e.editable&&e.editmode!="programmatic"){if(e._handleeditkeydown){h=e._handleeditkeydown(j,e)}}if(h&&e.keyboardnavigation&&e._handlekeydown){h=e._handlekeydown(j,e);if(!h){if(j.preventDefault){j.preventDefault()}if(j.stopPropagation!=undefined){j.stopPropagation()}}return h}}return true});this.addHandler(this.host,"keydown.edit"+this.element.id,function(i){var h=true;if(e.handlekeyboardnavigation){var j=e.handlekeyboardnavigation(i);if(j==true){return false}}if(e.editable&&e.editmode!="programmatic"){if(e._handleeditkeydown){h=e._handleeditkeydown(i,e)}}if(!b.browser.msie){if(h&&e.keyboardnavigation&&e._handlekeydown){h=e._handlekeydown(i,e);if(e.isNestedGrid){i.stopPropagation()}}}else{if(e.isNestedGrid){if(h&&e.keyboardnavigation&&e._handlekeydown){h=e._handlekeydown(i,e);i.stopPropagation()}}}if(!h){if(i.preventDefault){i.preventDefault()}if(i.stopPropagation!=undefined){i.stopPropagation()}}return h})},_hittestrow:function(s,q){if(this.vScrollInstance==null||this.hScrollInstance==null){return}if(s==undefined){s=0}if(q==undefined){q==0}var l=this.vScrollInstance;var k=this.hScrollInstance;var f=l.value;if(this.vScrollBar.css("visibility")!="visible"){f=0}var m=k.value;if(this.hScrollBar.css("visibility")!="visible"){m=0}var r=parseInt(f)+q;var j=parseInt(m)+s;if(this.visiblerows==null){return}var e=false;var i=this._findvisiblerow(r,this.visiblerows);if(i>=0){var o=this.visiblerows[i];var d=this.rowdetails&&o.rowdetails;var n=!o.rowdetailshidden;if(d){var g=this.visiblerows[i-1];if(g==o){o=g;i--}if(n){var h=b(this.hittestinfo[i].visualrow).position().top+parseInt(this.table.css("top"));var p=b(this.hittestinfo[i].visualrow).height();if(!(q>=h&&q<=h+p)){i++;o=this.visiblerows[i];e=true}}}}return{index:i,row:o,details:e}},getcellatposition:function(j,q){var r=this;var z=this.showheader?this.columnsheader.height()+2:0;var s=this._groupsheader()?this.groupsheader.height():0;var B=this.showtoolbar?this.toolbarheight:0;s+=B;var g=this.host.offset();if(this.hasTransform){g=b.jqx.utilities.getOffset(this.host)}var p=j-g.left;var n=q-z-g.top-s;var d=this._hittestrow(p,n);var k=d.row;var l=d.index;var t=this.table[0].rows[l];if(this.dataview&&this.dataview.records.length==0){var o=this.table[0].rows;var C=0;for(var w=0;w<o.length;w++){if(n>=C&&n<C+this.rowsheight){t=o[w];break}C+=this.rowsheight}k={boundindex:w}}if(t==null){return true}var u=this.hScrollInstance;var v=u.value;var f=0;var m=this.groupable?this.groups.length:0;for(var w=0;w<t.cells.length;w++){var h=parseInt(b(this.columnsrow[0].cells[w]).css("left"));var j=h-v;if(r.columns.records[w].pinned){j=h}var A=j+b(this.columnsrow[0].cells[w]).width();if(A>=p&&p>=j){f=w;break}}if(k!=null){var e=this._getcolumnat(f);return{row:k.boundindex,column:e.datafield,value:this.getcellvalue(k.boundindex,e.datafield)}}return null},_handlemousedown:function(F,w){if(F.target==null){return true}if(w.disabled){return true}if(b(F.target).ischildof(this.columnsheader)){return true}var I;if(F.which){I=(F.which==3)}else{if(F.button){I=(F.button==2)}}var N;if(F.which){N=(F.which==2)}else{if(F.button){N=(F.button==1)}}if(N){return true}if(this.showstatusbar){if(b(F.target).ischildof(this.statusbar)){return true}if(F.target==this.statusbar[0]){return true}}var H=this.showheader?this.columnsheader.height()+2:0;var z=this._groupsheader()?this.groupsheader.height():0;var M=this.showtoolbar?this.toolbarheight:0;z+=M;var h=this.host.offset();if(this.hasTransform){h=b.jqx.utilities.getOffset(this.host)}var k=parseInt(F.pageX);var v=parseInt(F.pageY);if(this.isTouchDevice()){var u=w.getTouches(F);var o=u[0];k=parseInt(o.pageX);v=parseInt(o.pageY);if(w.touchmode==true){k=parseInt(o._pageX);v=parseInt(o._pageY)}}var r=k-h.left;var q=v-H-h.top-z;var d=this._hittestrow(r,q);if(!d){return}if(d.details){return}var m=d.row;var n=d.index;var C=F.target.className;var A=this.table[0].rows[n];if(A==null){if(w.editable&&w.begincelledit){if(w.editcell){w.endcelledit(w.editcell.row,w.editcell.column,false,true)}}return true}w.mousecaptured=true;w.mousecaptureposition={left:F.pageX,top:F.pageY-z};var B=this.hScrollInstance;var E=B.value;var g=-1;var p=this.groupable?this.groups.length:0;for(var G=0;G<A.cells.length;G++){var j=parseInt(b(this.columnsrow[0].cells[G]).css("left"));var k=j-E;if(w.columns.records[G].pinned){k=j}var f=this._getcolumnat(G);if(f!=null&&f.hidden){continue}var L=k+b(this.columnsrow[0].cells[G]).width();if(L>=r&&r>=k){g=G;break}}if(m!=null&&g>=0){this._raiseEvent(1,{rowindex:m.boundindex,visibleindex:m.visibleindex,group:m.group,rightclick:I,originalEvent:F});var f=this._getcolumnat(g);var t=this.getcellvalue(m.boundindex,f.datafield);this._raiseEvent(8,{rowindex:m.boundindex,column:f?f.getcolumnproperties():null,datafield:f?f.datafield:null,columnindex:g,value:t,rightclick:I,originalEvent:F});var K=false;if(this._lastmousedown!=null){if(this._mousedown-this._lastmousedown<300){if(this._clickedrowindex==m.boundindex){this._raiseEvent(22,{rowindex:m.boundindex,visibleindex:m.visibleindex,group:m.group,rightclick:I,originalEvent:F});if(this._clickedcolumn==f.datafield){this._raiseEvent(23,{rowindex:m.boundindex,column:f?f.getcolumnproperties():null,datafield:f?f.datafield:null,columnindex:g,value:t,rightclick:I,originalEvent:F})}K=true;this._clickedrowindex=-1;this._clickedcolumn=null;if(F.isPropagationStopped&&F.isPropagationStopped()){return false}}}}if(I){return true}if(!K){this._clickedrowindex=m.boundindex;this._clickedcolumn=f.datafield}var D=b.jqx.utilities.getBrowser();if(D.browser=="msie"&&parseInt(D.version)<=7){if(g==0&&this.rowdetails){C="jqx-grid-group-collapse"}if(p>0){if(g<=p){C="jqx-grid-group-collapse"}}}if(C.indexOf("jqx-grid-group-expand")!=-1||C.indexOf("jqx-grid-group-collapse")!=-1){if(p>0&&g<p&&this._togglegroupstate){this._togglegroupstate(m.bounddata,true)}else{if(g==p&&this.rowdetails&&this.showrowdetailscolumn){this._togglerowdetails(m.bounddata,true);this.gridcontent[0].scrollTop=0;this.gridcontent[0].scrollLeft=0}}}else{if(m.boundindex!=-1){var J=this.selectedrowindexes.slice(0);var l=false;if(w.selectionmode!="none"&&this._selectrowwithmouse){if(w.selectionmode=="multiplecellsextended"||w.selectionmode=="multiplerowsextended"){if(!F.ctrlKey&&!F.shiftKey){w.selectedrowindexes=new Array();w.selectedcells=new Array()}}if(w.selectionmode.indexOf("cell")==-1){if((w.selectionmode!="singlerow")||(w.selectedrowindex!=m.boundindex&&w.selectionmode=="singlerow")){this._applyrowselection(m.boundindex,true,false,null,f.datafield);this._selectrowwithmouse(w,d,J,f.datafield,F.ctrlKey,F.shiftKey)}}else{if(f.datafield!=null){this._selectrowwithmouse(w,d,J,f.datafield,F.ctrlKey,F.shiftKey);this._applycellselection(m.boundindex,f.datafield,true,false)}}if(w._oldselectedcell){if(w._oldselectedcell.datafield==w.selectedcell.datafield&&w._oldselectedcell.rowindex==w.selectedcell.rowindex){l=true}}w._oldselectedcell=w.selectedcell}if(w.autosavestate){if(w.savestate){w.savestate()}}if(w.editable&&w.begincelledit){var e=w.editmode=="click"||(l&&w.editmode=="selectedcell");if(w.selectionmode.indexOf("cell")==-1){if(w.editmode!="dblclick"){e=true}}if(e){if(m.boundindex!=undefined&&f.editable){var s=w.begincelledit(m.boundindex,f.datafield,f.defaulteditorvalue);if(s){return true}}}if(w.selectionmode.indexOf("cell")!=-1){if(w.editmode=="selectedcell"&&!l&&w.editcell){w.endcelledit(w.editcell.row,w.editcell.column,false,true)}}return true}}}}return true},_columnPropertyChanged:function(e,d,g,f){},_rowPropertyChanged:function(g,d,f,e){},propertyChangedHandler:function(d,e,h,g){if(this.isInitialized==undefined||this.isInitialized==false){return}switch(e){case"touchmode":d._removeHandlers();d.touchDevice=null;d.vScrollBar.jqxScrollBar({touchMode:g});d.hScrollBar.jqxScrollBar({touchMode:g});d._updateTouchScrolling();d._addHandlers();break;case"autoshowcolumnsmenubutton":d._rendercolumnheaders();break;case"rendergridrows":d.updatebounddata();break;case"editmode":d._removeHandlers();d._addHandlers();break;case"source":d.virtualsizeinfo=null;if(d.showfilterrow&&d.filterable&&d.filterrow){d.filterrow.remove();d._filterrowcache=new Array();d.filterrow=null}d.updatebounddata();if(d.virtualmode&&!d._loading){d.loadondemand=true;d._renderrows(d.virtualsizeinfo)}break;case"horizontalscrollbarstep":case"verticalscrollbarstep":case"horizontalscrollbarlargestep":case"verticalscrollbarlargestep":this.vScrollBar.jqxScrollBar({step:this.verticalscrollbarstep,largestep:this.verticalscrollbarlargestep});this.hScrollBar.jqxScrollBar({step:this.horizontalscrollbarstep,largestep:this.horizontalscrollbarlargestep});break;case"closeablegroups":if(d._initgroupsheader){d._initgroupsheader()}break;case"showgroupsheader":d.rendergridcontent();break;case"theme":if(g!=h){if(d.pager){d.pager.removeClass();d.pager.addClass(d.toTP("jqx-grid-pager"));d.pager.addClass(d.toTP("jqx-widget-header"));if(d.pageable&&d._updatepagertheme){d._updatepagertheme()}}if(d.groupsheader){d.groupsheader.removeClass();d.groupsheader.addClass(d.toTP("jqx-grid-groups-header"));d.groupsheader.addClass(d.toTP("jqx-widget-header"))}d.toolbar.removeClass();d.toolbar.addClass(d.toTP("jqx-grid-toolbar"));d.toolbar.addClass(d.toTP("jqx-widget-header"));d.statusbar.removeClass();d.statusbar.addClass(d.toTP("jqx-grid-statusbar"));d.statusbar.addClass(d.toTP("jqx-widget-content"));d.vScrollBar.jqxScrollBar({theme:d.theme});d.hScrollBar.jqxScrollBar({theme:d.theme});d.host.removeClass();d.host.addClass(d.toTP("jqx-grid"));d.host.addClass(d.toTP("jqx-reset"));d.host.addClass(d.toTP("jqx-rc-all"));d.host.addClass(d.toTP("jqx-widget"));d.host.addClass(d.toTP("jqx-widget-content"));d.bottomRight.removeClass();d.bottomRight.addClass(d.toTP("jqx-grid-bottomright"));d.toolbar.addClass(d.toTP("jqx-grid-toolbar"));d.toolbar.addClass(d.toTP("jqx-widget-header"));d.statusbar.addClass(d.toTP("jqx-grid-statusbar"));d.statusbar.addClass(d.toTP("jqx-widget-header"));d.render()}break;case"showtoolbar":case"toolbarheight":d._arrange();d.refresh();break;case"showstatusbar":case"statusbarheight":d._arrange();d.refresh();break;case"filterable":if(h!=g){d.render()}break;case"autoshowfiltericon":case"showfiltercolumnbackground":case"showpinnedcolumnbackground":case"showsortcolumnbackground":d.rendergridcontent();break;case"showrowdetailscolumn":d.render();break;case"scrollbarsize":d._arrange();break;case"width":if(h!=g){if(!this._loading){if(g!=h){d._arrange();d._updatecolumnwidths();d._updatecellwidths();d._renderrows(d.virtualsizeinfo)}}}break;case"height":if(h!=g){if(!this._loading){if(g!=h){var i=d.groupable&&d.groups.length>0;var f=d.vScrollBar.css("visibility")!="visible";if(!i){d._arrange();d.virtualsizeinfo=d._calculatevirtualheight();if(parseInt(g)>=parseInt(h)){d.prerenderrequired=true}d._renderrows(d.virtualsizeinfo)}else{if(g>=h){d._render(true,false,false)}else{d.rendergridcontent(true,false)}}if(f&&d.vScrollBar.css("visibility")=="visible"){d._arrange();d._updatecolumnwidths();d._updatecellwidths()}}}}break;case"altrows":case"altstart":case"altstep":d._renderrows(d.virtualsizeinfo);break;case"groupsheaderheight":d._arrange();if(d._initgroupsheader){d._initgroupsheader()}break;case"pagerheight":if(h!=g){d._initpager()}break;case"selectedrowindex":d.selectrow(g);break;case"selectionmode":if(h!=g){if(g=="none"){d.selectedrowindexes=new Array();d.selectedcells=new Array();d.selectedrowindex=-1}d._renderrows(d.virtualsizeinfo)}break;case"showheader":if(g){d.columnsheader.css("display","block")}else{d.columnsheader.css("display","none")}break;case"virtualmode":d.dataview.virtualmode=d.virtualmode;d.dataview.refresh(false);d._render(false,false,false);break;case"columnsmenu":if(h!=g){d.render()}break;case"columns":d._columns=null;d._filterrowcache=[];d.render();break;case"autoheight":if(h!=g){d._render(false,false,true)}break;case"pagesizeoptions":case"pageable":case"pagesize":if(h!=g){if(d._loading){alert(d.loadingerrormessage);return}if(d._initpager){d.dataview.pageable=d.pageable;d.dataview.pagenum=0;d.dataview.pagesize=d._getpagesize();if(d.virtualmode){d.updatebounddata()}d.dataview.refresh(true);d._initpager();if(e=="pagesizeoptions"){if(g!=null&&g.length>0){d.pagesize=g[0];d.dataview.pagesize=g[0];d.prerenderrequired=true;d._requiresupdate=true;d.dataview.pagenum=-1;d.gotopage(0)}}}d._render(false,false,false)}break;case"groups":d.updatebounddata();break;case"groupable":d.dataview.groupable=d.groupable;d.dataview.pagenum=0;d.dataview.refresh(false);d._render(false,false,true);break;case"disabled":if(g){d.host.addClass(d.toThemeProperty("jqx-fill-state-disabled"))}else{d.host.removeClass(d.toThemeProperty("jqx-fill-state-disabled"))}break}}});function c(d,e){this.owner=d;this.datafield=null;this.text="";this.sortable=true;this.hideable=true;this.editable=true;this.hidden=false;this.groupable=true;this.renderer=null;this.cellsrenderer=null;this.checkchange=null,this.threestatecheckbox=false;this.buttonclick=null,this.columntype=null;this.cellsformat="";this.align="left";this.cellsalign="left";this.width="auto";this.minwidth=25;this.maxwidth="auto";this.pinned=false;this.visibleindex=-1;this.filterable=true;this.filter=null;this.filteritems=[];this.resizable=true;this.initeditor=null;this.createeditor=null;this.validation=null;this.classname="";this.cellclassname="";this.cellendedit=null;this.cellbeginedit=null;this.cellvaluechanging=null;this.aggregates=null;this.aggregatesrenderer=null;this.menu=true;this.createfilterwidget=null;this.filtertype="default";this.filtercondition=null;this.rendered=null;this.exportable=true;this.draggable=true;this.getcolumnproperties=function(){return{sortable:this.sortable,hideable:this.hideable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,cellsalign:this.cellsalign,pinned:this.pinned,cellsformat:this.cellsformat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}},this.setproperty=function(f,g){if(this[f]){var h=this[f];this[f]=g;this.owner._columnPropertyChanged(this,f,g,h)}};this._initfields=function(f){if(f!=null){if(f.datafield!=undefined){this.datafield=f.datafield}if(f.dataField!=undefined){this.datafield=f.dataField}if(f.text!=undefined){this.text=f.text}if(f.sortable!=undefined){this.sortable=f.sortable}if(f.hideable!=undefined){this.hideable=f.hideable}if(f.hidden!=undefined){this.hidden=f.hidden}if(f.groupable!=undefined){this.groupable=f.groupable}if(f.renderer!=undefined){this.renderer=f.renderer}if(f.align!=undefined){this.align=f.align}if(f.cellsalign!=undefined){this.cellsalign=f.cellsalign}if(f.cellsformat!=undefined){this.cellsformat=f.cellsformat}if(f.width!=undefined){this.width=f.width}if(f.minwidth!=undefined){this.minwidth=f.minwidth}if(f.maxwidth!=undefined){this.maxwidth=f.maxwidth}if(f.cellsrenderer!=undefined){this.cellsrenderer=f.cellsrenderer}if(f.columntype!=undefined){this.columntype=f.columntype}if(f.checkchange!=undefined){this.checkchange=f.checkchange}if(f.buttonclick!=undefined){this.buttonclick=f.buttonclick}if(f.pinned!=undefined){this.pinned=f.pinned}if(f.visibleindex!=undefined){this.visibleindex=f.visibleindex}if(f.filterable!=undefined){this.filterable=f.filterable}if(f.filter!=undefined){this.filter=f.filter}if(f.resizable!=undefined){this.resizable=f.resizable}if(f.editable!=undefined){this.editable=f.editable}if(f.initeditor!=undefined){this.initeditor=f.initeditor}if(f.createeditor!=undefined){this.createeditor=f.createeditor}if(f.validation!=undefined){this.validation=f.validation}if(f.cellbeginedit!=undefined){this.cellbeginedit=f.cellbeginedit}if(f.cellendedit!=undefined){this.cellendedit=f.cellendedit}if(f.classname!=undefined){this.classname=f.classname}if(f.cellclassname!=undefined){this.cellclassname=f.cellclassname}if(f.menu!=undefined){this.menu=f.menu}if(f.aggregates!=undefined){this.aggregates=f.aggregates}if(f.aggregatesrenderer!=undefined){this.aggregatesrenderer=f.aggregatesrenderer}if(f.createfilterwidget!=undefined){this.createfilterwidget=f.createfilterwidget}if(f.filtertype!=undefined){this.filtertype=f.filtertype}if(f.rendered!=undefined){this.rendered=f.rendered}if(f.exportable!=undefined){this.exportable=f.exportable}if(f.filteritems!=undefined){this.filteritems=f.filteritems}if(f.cellvaluechanging!=undefined){this.cellvaluechanging=f.cellvaluechanging}if(f.draggable!=undefined){this.draggable=f.draggable}if(f.filtercondition!=undefined){this.filtercondition=f.filtercondition}if(f.threestatecheckbox!=undefined){this.threestatecheckbox=f.threestatecheckbox}}};this._initfields(e);return this}function a(d,e){this.setdata=function(f){if(f!=null){this.bounddata=f;this.boundindex=f.boundindex;this.visibleindex=f.visibleindex;this.group=f.group;this.parentbounddata=f.parentItem;this.uniqueid=f.uniqueid;this.level=f.level}};this.setdata(e);this.parentrow=null;this.subrows=new Array();this.owner=d;this.height=25;this.hidden=false;this.rowdetails=null;this.rowdetailsheight=100;this.rowdetailshidden=true;this.top=-1;this.setrowinfo=function(f){this.hidden=f.hidden;this.rowdetails=f.rowdetails;this.rowdetailsheight=f.rowdetailsheight;this.rowdetailshidden=!f.showdetails;this.height=f.height};return this}b.jqx.collection=function(d){this.records=new Array();this.owner=d;this.updating=false;this.beginupdate=function(){this.updating=true};this.resumeupdate=function(){this.updating=false};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(f){var e=this.length;var g=Number(arguments[1])||0;g=(g<0)?Math.ceil(g):Math.floor(g);if(g<0){g+=e}for(;g<e;g++){if(g in this&&this[g]===f){return g}}return -1}}this._raiseEvent=function(e){};this.clear=function(){this.records=new Array()};this.replace=function(f,e){this.records[f]=e;if(!this.updating){this._raiseEvent({type:"replace",element:e})}};this.isempty=function(e){if(this.records[e]==undefined){return true}return false};this.initialize=function(e){if(e<1){e=1}this.records[e-1]=-1};this.length=function(){return this.records.length};this.indexOf=function(e){return this.records.indexOf(e)};this.add=function(e){if(e==null){return false}this.records[this.records.length]=e;if(!this.updating){this._raiseEvent({type:"add",element:e})}return true};this.insertAt=function(f,e){if(f==null||f==undefined){return false}if(e==null){return false}if(f>=0){if(f<this.records.length){this.records.splice(f,0,e);if(!this.updating){this._raiseEvent({type:"insert",index:f,element:e})}return true}else{return this.add(e)}}return false};this.remove=function(f){if(f==null||f==undefined){return false}var e=this.records.indexOf(f);if(e!=-1){this.records.splice(e,1);if(!this.updating){this._raiseEvent({type:"remove",element:f})}return true}return false};this.removeAt=function(f){if(f==null||f==undefined){return false}if(f<0){return false}if(f<this.records.length){var e=this.records[f];this.records.splice(f,1);if(!this.updating){this._raiseEvent({type:"removeAt",index:f,element:e})}return true}return false};return this};b.jqx.dataview=function(){this.self=this;this.grid=null;this.uniqueId="id";this.records=[];this.rows=[];this.columns=[];this.groups=[];this.filters=new Array();this.updated=null;this.update=null;this.suspend=false;this.pagesize=0;this.pagenum=0;this.totalrows=0;this.totalrecords=0;this.groupable=true;this.loadedrecords=[];this.loadedrootgroups=[];this.loadedgroups=[];this.loadedgroupsByKey=[];this.virtualmode=true;this._cachegrouppages=new Array();this.source=null;this.changedrecords=new Array();this.rowschangecallback=null;this.suspendupdate=function(){this.suspend=true},this.isupdating=function(){return this.suspend},this.resumeupdate=function(d){this.suspend=false;if(d==undefined){d=true}this.refresh(d)},this.getrecords=function(){return this.records},this.clearrecords=function(){this.recordids=new Array()};this.databind=function(d,n){var o=d._source?true:false;var e=null;if(o){e=d;d=d._source}else{e=new b.jqx.dataAdapter(d,{autoBind:false})}var g=function(m){e.recordids=[];e.records=new Array();e.cachedrecords=new Array();e.originaldata=new Array();e._options.virtualmode=m.virtualmode;e._options.totalrecords=m.totalrecords;e._options.originaldata=m.originaldata;e._options.recordids=m.recordids;e._options.cachedrecords=new Array();e._options.pagenum=m.pagenum;e._options.pageable=m.pageable;if(d.type!=undefined){e._options.type=d.type}if(d.formatdata!=undefined){e._options.formatData=d.formatdata}if(d.contenttype!=undefined){e._options.contentType=d.contenttype}if(d.async!=undefined){e._options.async=d.async}if(d.updaterow!=undefined){e._options.updaterow=d.updaterow}if(d.addrow!=undefined){e._options.addrow=d.addrow}if(d.deleterow!=undefined){e._options.deleterow=d.deleterow}if(m.pagesize==0){m.pagesize=10}e._options.pagesize=m.pagesize};var q=function(u){u.totalrecords=e.totalrecords;if(!u.virtualmode){u.originaldata=e.originaldata;u.records=e.records;u.recordids=e.recordids;u.cachedrecords=e.cachedrecords}else{var m={startindex:u.pagenum*u.pagesize,endindex:(u.pagenum*u.pagesize+u.pagesize)};if(d.recordstartindex){m.startindex=d.recordstartindex}if(d.recordendindex){m.endindex=d.recordendindex}else{if(!u.grid.pageable){m.endindex=m.startindex+100;if(u.grid.autoheight){m.endindex=m.startindex+u.totalrecords}}}m.data=e.records;if(u.grid.rendergridrows&&u.totalrecords>0){d.records=u.grid.rendergridrows(m)}if(!d.records||u.totalrecords==0){d.records=new Array()}u.originaldata=d.records;u.records=d.records;u.cachedrecords=d.records}};g(this);this.source=d;if(n!==undefined){uniqueId=n}var r=this;switch(d.datatype){case"local":case"array":default:if(d.localdata==null){d.localdata=[]}if(d.localdata!=null){e.unbindBindingUpdate(r.grid.element.id);e.dataBind();var p=function(m){if(m!=undefined){var u=e._changedrecords[0];if(u){b.each(e._changedrecords,function(){var v=this.index;var w=this.record;r.grid._updateFromAdapter=true;switch(m){case"update":var x=r.grid.getrowid(v);r.grid.updaterow(x,w);r.grid._updateFromAdapter=false;return;case"add":r.grid.addrow(null,w);r.grid._updateFromAdapter=false;return;case"remove":var x=r.grid.getrowid(v);r.grid.deleterow(x);r.grid._updateFromAdapter=false;return}})}}q(r,m);if(m=="updateData"){r.refresh();r.grid._updateGridData()}else{if(d.recordstartindex&&this.virtualmode){r.updateview(d.recordstartindex,d.recordstartindex+r.pagesize)}else{r.refresh()}r.update()}};p();e.bindBindingUpdate(r.grid.element.id,p)}break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(d.localdata!=null){e.unbindBindingUpdate(r.grid.element.id);e.dataBind();var p=function(m){q(r);if(m=="updateData"){r.refresh();r.grid._updateGridData()}else{if(d.recordstartindex){r.updateview(d.recordstartindex,d.recordstartindex+r.pagesize)}else{r.refresh()}r.update()}};p();e.bindBindingUpdate(r.grid.element.id,p);return}var l={};var i=0;var t={};for(var s=0;s<this.filters.length;s++){var j=this.filters[s].datafield;var f=this.filters[s].filter;var h=f.getfilters();t[j+"operator"]=f.operator;for(var k=0;k<h.length;k++){h[k].datafield=j;t["filtervalue"+i]=h[k].value;t["filtercondition"+i]=h[k].condition;t["filteroperator"+i]=h[k].operator;t["filterdatafield"+i]=j;i++}}t.filterscount=i;t.groupscount=r.groups.length;for(var s=0;s<r.groups.length;s++){t["group"+s]=r.groups[s]}if(d.recordstartindex==undefined){d.recordstartindex=0}if(d.recordendindex==undefined||d.recordendindex==0){if(r.grid.height&&r.grid.height.toString().indexOf("%")==-1){d.recordendindex=parseInt(r.grid.height)/r.grid.rowsheight;d.recordendindex+=2}else{d.recordendindex=b(window).height()/r.grid.rowsheight}}b.extend(t,{sortdatafield:r.sortfield,sortorder:r.sortfielddirection,pagenum:r.pagenum,pagesize:r.grid.pagesize,recordstartindex:d.recordstartindex,recordendindex:d.recordendindex});if(e._options.data){b.extend(e._options.data,t)}else{if(d.data){b.extend(t,d.data)}e._options.data=t}var p=function(){q(r);if(d.recordstartindex){r.updateview(d.recordstartindex,d.recordstartindex+r.pagesize)}else{r.refresh()}r.update()};e.unbindDownloadComplete(r.grid.element.id);e.bindDownloadComplete(r.grid.element.id,p);e.dataBind()}};this.getid=function(g,e,f){if(b(g,e).length>0){return b(g,e).text()}if(g){if(g.toString().length>0){var d=b(e).attr(g);if(d!=null&&d.toString().length>0){return d}}}return f};this.getvaluebytype=function(g,d){var e=g;if(d.type=="date"){var f=new Date(g);if(f.toString()=="NaN"||f.toString()=="Invalid Date"){if(b.jqx.dataFormat){g=b.jqx.dataFormat.tryparsedate(g)}else{g=f}}else{g=f}if(g==null){g=e}}else{if(d.type=="float"){var g=parseFloat(g);if(isNaN(g)){g=e}}else{if(d.type=="int"){var g=parseInt(g);if(isNaN(g)){g=e}}else{if(d.type=="bool"){if(g!=null){if(g.toLowerCase()=="false"){g=false}else{if(g.toLowerCase()=="true"){g=true}}}if(g==1){g=true}else{if(g==0){g=false}else{g=""}}}}}}return g};this.setpaging=function(d){if(d.pageSize!=undefined){this.pagesize=d.pageSize}if(d.pageNum!=undefined){this.pagenum=Math.min(d.pageNum,Math.ceil(this.totalrows/this.pagesize))}this.refresh()};this.getpagingdetails=function(){return{pageSize:this.pagesize,pageNum:this.pagenum,totalrows:this.totalrows}};this._clearcaches=function(){this.sortcache={};this.sortdata=null;this.changedrecords=new Array();this.records=new Array();this.rows=new Array();this.cacheddata=new Array();this.originaldata=new Array();this.bounditems=new Array();this.loadedrecords=new Array();this.loadedrootgroups=new Array();this.loadedgroups=new Array();this.loadedgroupsByKey=new Array();this._cachegrouppages=new Array();this.recordsbyid=new Array();this.cachedrecords=new Array();this.recordids=new Array()};this.addfilter=function(g,f){var e=-1;for(var d=0;d<this.filters.length;d++){if(this.filters[d].datafield==g){e=d;break}}if(e==-1){this.filters[this.filters.length]={filter:f,datafield:g}}else{this.filters[e]={filter:f,datafield:g}}};this.removefilter=function(e){for(var d=0;d<this.filters.length;d++){if(this.filters[d].datafield==e){this.filters.splice(d,1);break}}};this.getItemFromIndex=function(d){return this.records[d]};this.updaterow=function(f,h,e){if(h!=undefined&&f!=undefined){h.uid=f;if(!(h[this.source.id])){h[this.source.id]=h.uid}var d=this.recordsbyid["id"+f];var g=this.records.indexOf(d);this.records[g]=h;if(e==true||e==undefined){this.refresh()}this.changedrecords[h.uid]={Type:"Update",OldData:d,Data:h};return true}return false};this.addrow=function(h,i,d,g){if(i!=undefined){if(!h){i.uid=this.getid(this.source.id,i,this.totalrecords);var e=this.recordsbyid["id"+i.uid];while(e!=null){var f=Math.floor(Math.random()*10000).toString();i.uid=f;e=this.recordsbyid["id"+f]}}else{i.uid=h}if(!(i[this.source.id])){if(this.source.id!=undefined){i[this.source.id]=i.uid}}if(d=="last"){this.records.push(i)}else{this.records.splice(0,0,i)}this.totalrecords++;if(g==true||g==undefined){this.refresh()}this.changedrecords[i.uid]={Type:"New",Data:i};return true}return false};this.deleterow=function(f,e){if(f!=undefined){if(this.recordsbyid["id"+f]){var d=this.recordsbyid["id"+f];var g=this.records.indexOf(d);this.changedrecords[f]={Type:"Delete",Data:this.records[g]};this.records.splice(g,1);this.totalrecords--;if(e==true||e==undefined){this.refresh()}return true}return false}return false};this.reload=function(f,d,r,g,h,u,t){var m=this;var l=new Array();var o=f;var i=d;var j=r;var p=g;var k=i.length;var w=0;var e=0;var s,n;this.columns=[];this.bounditems=new Array();this.loadedrecords=new Array();this.loadedrootgroups=new Array();this.loadedgroups=new Array();this.loadedgroupsByKey=new Array();this._cachegrouppages=new Array();this.recordsbyid={};if(this.totalrecords==0){Object.size=function(z){var y=0,x;for(x in z){if(z.hasOwnProperty(x)){y++}}return y};var v=Object.size(o);this.totalrecords=v;b.each(this.records,function(y){var z=this;var x=0;b.each(z,function(A,B){m.columns[x++]=A});return false})}if(this.virtualmode){if(this.pageable){this.updateview();return}var u=0;if(!this.groupable){this.updateview();return}else{var t=this.totalrecords}}else{var u=0;var t=this.totalrecords}if(this.groupable&&this.groups.length>0&&this.loadgrouprecords){var q=u;q=this.loadgrouprecords(0,u,t,j,e,p,i,k,l)}else{w=this.loadflatrecords(u,t,j,e,p,i,k,l)}if(k>e){i.splice(e,k-e)}if(this.groups.length>0&&this.groupable){this.totalrows=q}else{this.totalrows=w}return l};this.loadflatrecords=function(d,o,e,p,l,u,n,q){var t=this;var k=d;var m=d;o=Math.min(o,this.totalrecords);var g=this.sortdata!=null;var f=this.source.id&&(this.source.datatype=="local"||this.source.datatype=="array"||this.source.datatype=="");var j=g?this.sortdata:this.records;for(var h=d;h<o;h++){var s={};if(!g){s=b.extend({},j[h]);id=s[t.uniqueId];s.boundindex=k;t.loadedrecords[k]=s;s.uid=t.getid(t.source.id,s,k);t.recordsbyid["id"+s.uid]=j[h];s.uniqueid=t.generatekey();t.bounditems[this.bounditems.length]=s}else{s=b.extend({},j[h].value);id=s[t.uniqueId];s.boundindex=j[h].index;s.uid=t.getid(t.source.id,s,s.boundindex);t.recordsbyid["id"+s.uid]=j[h].value;t.loadedrecords[k]=s;s.uniqueid=t.generatekey();t.bounditems[s.boundindex]=s}if(p>=n||id!=u[p][t.uniqueId]||(l&&l[id])){q[q.length]=p}u[p]=s;p++;s.visibleindex=m;m++;k++}if(t.grid.summaryrows){var r=k;b.each(t.grid.summaryrows,function(){var i=b.extend({},this);i.boundindex=o++;t.loadedrecords[r]=i;i.uniqueid=t.generatekey();t.bounditems[t.bounditems.length]=i;u[p]=i;p++;i.visibleindex=m;m++;r++})}return m},this.updateview=function(n,o){var q=this;var k=this.pagesize*this.pagenum;var m=0;var r=new Array();var e=this.filters;var j=this.updated;var l=r.length;if(this.pageable){if(this.virtualmode){if(!this.groupable||this.groups.length==0){this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),e,m,j,r,l,[]);this.totalrows=r.length}else{if(this.groupable&&this.groups.length>0&&this.loadgrouprecords){if(this._cachegrouppages[this.pagenum+"_"+this.pagesize]!=undefined){this.rows=this._cachegrouppages[this.pagenum+"_"+this.pagesize];this.totalrows=this.rows.length;return}this.loadgrouprecords(0,this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),e,m,j,r,l,[]);this._cachegrouppages[this.pagenum+"_"+this.pagesize]=this.rows;this.totalrows=this.rows.length;return}}}}else{if(this.virtualmode&&(!this.groupable||this.groups.length==0)){var g=this.pagesize;if(g==0){g=Math.min(100,this.totalrecords)}var d=g*this.pagenum;if(this.loadedrecords.length==0){d=0}if(n!=null&&o!=null){this.loadflatrecords(n,o,e,m,j,r,l,[])}else{this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),e,m,j,r,l,[])}this.totalrows=this.loadedrecords.length;this.rows=r;if(r.length>=g){return}}}if(this.groupable&&this.pageable&&this.groups.length>0&&this._updategroupsinpage){r=this._updategroupsinpage(q,e,k,m,l,this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum))}else{for(var h=this.pagesize*this.pagenum;h<this.pagesize*(1+this.pagenum);h++){var p=h<this.loadedrecords.length?this.loadedrecords[h]:null;if(p==null){continue}if(!this.pagesize||(k>=this.pagesize*this.pagenum&&k<=this.pagesize*(this.pagenum+1))){r[m]=p;m++}k++}}if((r.length==0||r.length<this.pagesize)&&!this.pageable&&this.virtualmode){m=r.length;var f=r.length;for(var h=this.pagesize*this.pagenum;h<this.pagesize*(1+this.pagenum)-f;h++){var p={};p.boundindex=h+f;p.visibleindex=h+f;p.uniqueid=q.generatekey();p.empty=true;q.bounditems[h+f]=p;r[m]=p;m++}}this.rows=r};this.generatekey=function(){var d=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};return(d()+d()+"-"+d()+"-"+d()+"-"+d()+"-"+d()+d()+d())};this.reloaddata=function(){this.reload(this.records,this.rows,this.filter,this.updated,true)};this.refresh=function(h){if(this.suspend){return}if(h==undefined){h=true}var l=this.rows.length;var k=this.totalrows;if(this.filters.length>0&&!this.virtualmode){var e="";var g=this.cachedrecords.length;var s=new Array();this.totalrecords=0;var n=this.cachedrecords;this._dataIndexToBoundIndex=new Array();var f=this.filters.length;if(this.source!=null&&this.source.filter!=undefined&&this.source.localdata!=undefined){s=this.source.filter(this.filters,n,g);if(s==undefined){s=new Array()}this.records=s}else{if(this.source.filter==null||this.source.filter==undefined){for(var u=0;u<g;u++){var o=n[u];var d=undefined;for(var m=0;m<f;m++){var e=this.filters[m].filter;var r=o[this.filters[m].datafield];var t=e.evaluate(r);if(d==undefined){d=t}else{if(e.operator=="or"){d=d||t}else{d=d&&t}}}if(d){s[s.length]=b.extend({dataindex:u},o);this._dataIndexToBoundIndex[u]={boundindex:s.length-1}}else{this._dataIndexToBoundIndex[u]=null}}this.records=s}}if(this.sortdata){var i=this.sortfield;if(this.sortcache[i]){this.sortdata=null;var p=this.sortcache[i].direction;this.sortcache[i]=null;this.sortby(this.sortfield,p);return}}}else{if(this.filters.length==0&&!this.virtualmode){if(this.cachedrecords){this.totalrecords=0;var n=this.cachedrecords;this.records=n;if(this.sortdata){var i=this.sortfield;if(this.sortcache[i]){this.sortdata=null;var p=this.sortcache[i].direction;this.sortcache[i]=null;this.sortby(this.sortfield,p);return}}}}}var q=this.reload(this.records,this.rows,this.filter,this.updated,h);this.updated=null;if(this.rowschangecallback!=null){if(k!=totalrows){this.rowschangecallback({type:"PagingChanged",data:getpagingdetails()})}if(l!=rows.length){this.rowschangecallback({type:"RowsCountChanged",data:{previous:l,current:rows.length}})}if(q.length>0||l!=rows.length){this.rowschangecallback({type:"RowsChanged",data:{previous:l,current:rows.length,diff:q}})}}};return this}})(jQuery);