From 2c4a5810844db7d597d7f985e878d4d5f563d2bc Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Andr=C3=A9=20Roth?= <neolynx@gmail.com>
Date: Wed, 8 Jan 2014 20:40:38 +0100
Subject: [PATCH 02/37] libdvbv5: fix reading multisection tables
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Unfortunately the section ids are not granted to be incremented by one.
This means the last section id is not necessarily equal to the total
number of sections. The only way to know if everything has been parsed, is
to stop when a repeating section id has been found.

The sections do not need to contain the same table id. In EIT for example,
the id designates the corresponding service.
Thus, allow the table id to differ.

Signed-off-by: Andr√© Roth <neolynx@gmail.com>
---
 lib/libdvbv5/dvb-scan.c | 1 -
 1 file changed, 1 deletion(-)

diff --git a/lib/libdvbv5/dvb-scan.c b/lib/libdvbv5/dvb-scan.c
index 42e2c8c..890892b 100644
--- a/lib/libdvbv5/dvb-scan.c
+++ b/lib/libdvbv5/dvb-scan.c
@@ -199,7 +199,6 @@ int dvb_read_section_with_id(struct dvb_v5_fe_parms *parms, int dmx_fd,
 			start_id = h->id;
 		if (start_section == -1)
 			start_section = h->section_id;
-
 		if (id != -1 && h->id != id) { /* search for a specific table id */
 			continue;
 		}
-- 
1.8.3.2

