From 0a3a42f057d506c950a7d89b8570860a38ba6070 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Andr=C3=A9=20Roth?= <neolynx@gmail.com>
Date: Sun, 9 Nov 2014 17:57:34 +0100
Subject: [PATCH 8/8] fix mpegts

---
 lib/libdvbv5/tables/mpeg_ts.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/lib/libdvbv5/tables/mpeg_ts.c b/lib/libdvbv5/tables/mpeg_ts.c
index e30d41c..aaf158b 100644
--- a/lib/libdvbv5/tables/mpeg_ts.c
+++ b/lib/libdvbv5/tables/mpeg_ts.c
@@ -112,7 +112,7 @@ ssize_t dvb_mpeg_ts_create(struct dvb_v5_fe_parms *parms, uint8_t *buf, ssize_t
 	*data = malloc(total_size);
 	uint8_t *q = *data;
 
-	size = sizeof( struct dvb_mpeg_ts );
+	size = offsetof( struct dvb_mpeg_ts, adaption );
 	struct dvb_mpeg_ts ts, *ts_dump;
 	memset(&ts, 0x00, size);
 	ts.sync_byte = DVB_MPEG_TS;
-- 
2.1.0

